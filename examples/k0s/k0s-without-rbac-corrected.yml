# Following metadata labels should not be used:
# - "app" as "kubernetes.io/name" is officially recommanded by Kubernetes
#   There is only one occurrence in the ConfigMap "kube-proxy".
# - "k8s-app" as it is not related to k0s
#   There are 32 occurrences!
# - "app.kubernetes.io/component" should be used in conjonction
#   with "kubernetes.io/name"
#   There are 2 occurrences.
# All these labels were commented (#TBR:) and replaced by label
# "k0s.k0sproject.io/stack" when required.

apiVersion: v1
items:
- apiVersion: apiextensions.k8s.io/v1
  kind: CustomResourceDefinition
  metadata:
    annotations:
      controller-gen.kubebuilder.io/version: v0.16.1
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"apiextensions.k8s.io/v1","kind":"CustomResourceDefinition","metadata":{"annotations":{"controller-gen.kubebuilder.io/version":"v0.16.1"},"name":"charts.helm.k0sproject.io"},"spec":{"group":"helm.k0sproject.io","names":{"kind":"Chart","listKind":"ChartList","plural":"charts","singular":"chart"},"scope":"Namespaced","versions":[{"name":"v1beta1","schema":{"openAPIV3Schema":{"description":"Chart is the Schema for the charts API","properties":{"apiVersion":{"description":"APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources","type":"string"},"kind":{"description":"Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds","type":"string"},"metadata":{"type":"object"},"spec":{"description":"ChartSpec defines the desired state of Chart","properties":{"chartName":{"type":"string"},"forceUpgrade":{"description":"ForceUpgrade when set to false, disables the use of the \"--force\" flag when upgrading the the chart (default: true).","type":"boolean"},"namespace":{"type":"string"},"order":{"type":"integer"},"releaseName":{"type":"string"},"timeout":{"type":"string"},"values":{"type":"string"},"version":{"type":"string"}},"type":"object"},"status":{"description":"ChartStatus defines the observed state of Chart","properties":{"appVersion":{"type":"string"},"error":{"type":"string"},"namespace":{"type":"string"},"releaseName":{"type":"string"},"revision":{"format":"int64","type":"integer"},"status":{"type":"string"},"updated":{"type":"string"},"valuesHash":{"type":"string"},"version":{"type":"string"}},"type":"object"}},"type":"object"}},"served":true,"storage":true,"subresources":{"status":{}}}]}}
      k0s.k0sproject.io/stack-checksum: eef04da61373f9be5d20aec33eb6fa33
    creationTimestamp: "2024-12-28T20:26:58Z"
    generation: 1
    labels:
      k0s.k0sproject.io/stack: helm
    name: charts.helm.k0sproject.io
    resourceVersion: "207"
    uid: 26191b46-9443-4e3d-aa1b-a0b51d089174
  spec:
    conversion:
      strategy: None
    group: helm.k0sproject.io
    names:
      kind: Chart
      listKind: ChartList
      plural: charts
      singular: chart
    scope: Namespaced
    versions:
    - name: v1beta1
      schema:
        openAPIV3Schema:
          description: Chart is the Schema for the charts API
          properties:
            apiVersion:
              description: |-
                APIVersion defines the versioned schema of this representation of an object.
                Servers should convert recognized schemas to the latest internal value, and
                may reject unrecognized values.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
              type: string
            kind:
              description: |-
                Kind is a string value representing the REST resource this object represents.
                Servers may infer this from the endpoint the client submits requests to.
                Cannot be updated.
                In CamelCase.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
              type: string
            metadata:
              type: object
            spec:
              description: ChartSpec defines the desired state of Chart
              properties:
                chartName:
                  type: string
                forceUpgrade:
                  description: 'ForceUpgrade when set to false, disables the use of
                    the "--force" flag when upgrading the the chart (default: true).'
                  type: boolean
                namespace:
                  type: string
                order:
                  type: integer
                releaseName:
                  type: string
                timeout:
                  type: string
                values:
                  type: string
                version:
                  type: string
              type: object
            status:
              description: ChartStatus defines the observed state of Chart
              properties:
                appVersion:
                  type: string
                error:
                  type: string
                namespace:
                  type: string
                releaseName:
                  type: string
                revision:
                  format: int64
                  type: integer
                status:
                  type: string
                updated:
                  type: string
                valuesHash:
                  type: string
                version:
                  type: string
              type: object
          type: object
      served: true
      storage: true
      subresources:
        status: {}
  status:
    acceptedNames:
      kind: Chart
      listKind: ChartList
      plural: charts
      singular: chart
    conditions:
    - lastTransitionTime: "2024-12-28T20:26:58Z"
      message: no conflicts found
      reason: NoConflicts
      status: "True"
      type: NamesAccepted
    - lastTransitionTime: "2024-12-28T20:26:58Z"
      message: the initial names have been accepted
      reason: InitialNamesAccepted
      status: "True"
      type: Established
    storedVersions:
    - v1beta1
- apiVersion: apiextensions.k8s.io/v1
  kind: CustomResourceDefinition
  metadata:
    annotations:
      controller-gen.kubebuilder.io/version: v0.16.1
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"apiextensions.k8s.io/v1","kind":"CustomResourceDefinition","metadata":{"annotations":{"controller-gen.kubebuilder.io/version":"v0.16.1"},"name":"controlnodes.autopilot.k0sproject.io"},"spec":{"group":"autopilot.k0sproject.io","names":{"kind":"ControlNode","listKind":"ControlNodeList","plural":"controlnodes","singular":"controlnode"},"scope":"Cluster","versions":[{"name":"v1beta2","schema":{"openAPIV3Schema":{"description":"ControlNode is a node which behaves as a controller, able to receive autopilot\nsignaling updates.","properties":{"apiVersion":{"description":"APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources","type":"string"},"kind":{"description":"Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds","type":"string"},"metadata":{"type":"object"},"status":{"description":"ControlNodeStatus has the runtime status info of the controller such as address etc.","properties":{"addresses":{"items":{"description":"NodeAddress contains information for the node's address.","properties":{"address":{"description":"The node address.","type":"string"},"type":{"description":"Node address type, one of Hostname, ExternalIP or InternalIP.","type":"string"}},"required":["address","type"],"type":"object"},"type":"array"}},"type":"object"}},"type":"object"}},"served":true,"storage":true,"subresources":{"status":{}}}]}}
      k0s.k0sproject.io/stack-checksum: dfdfe7ce60273364e6cc88449f6a3c69
    creationTimestamp: "2024-12-28T20:27:00Z"
    generation: 1
    labels:
      k0s.k0sproject.io/stack: autopilot
    name: controlnodes.autopilot.k0sproject.io
    resourceVersion: "248"
    uid: b68e6944-7066-4640-9ffd-c5b92bc6f076
  spec:
    conversion:
      strategy: None
    group: autopilot.k0sproject.io
    names:
      kind: ControlNode
      listKind: ControlNodeList
      plural: controlnodes
      singular: controlnode
    scope: Cluster
    versions:
    - name: v1beta2
      schema:
        openAPIV3Schema:
          description: |-
            ControlNode is a node which behaves as a controller, able to receive autopilot
            signaling updates.
          properties:
            apiVersion:
              description: |-
                APIVersion defines the versioned schema of this representation of an object.
                Servers should convert recognized schemas to the latest internal value, and
                may reject unrecognized values.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
              type: string
            kind:
              description: |-
                Kind is a string value representing the REST resource this object represents.
                Servers may infer this from the endpoint the client submits requests to.
                Cannot be updated.
                In CamelCase.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
              type: string
            metadata:
              type: object
            status:
              description: ControlNodeStatus has the runtime status info of the controller
                such as address etc.
              properties:
                addresses:
                  items:
                    description: NodeAddress contains information for the node's address.
                    properties:
                      address:
                        description: The node address.
                        type: string
                      type:
                        description: Node address type, one of Hostname, ExternalIP
                          or InternalIP.
                        type: string
                    required:
                    - address
                    - type
                    type: object
                  type: array
              type: object
          type: object
      served: true
      storage: true
      subresources:
        status: {}
  status:
    acceptedNames:
      kind: ControlNode
      listKind: ControlNodeList
      plural: controlnodes
      singular: controlnode
    conditions:
    - lastTransitionTime: "2024-12-28T20:27:00Z"
      message: no conflicts found
      reason: NoConflicts
      status: "True"
      type: NamesAccepted
    - lastTransitionTime: "2024-12-28T20:27:00Z"
      message: the initial names have been accepted
      reason: InitialNamesAccepted
      status: "True"
      type: Established
    storedVersions:
    - v1beta2
- apiVersion: apiextensions.k8s.io/v1
  kind: CustomResourceDefinition
  metadata:
    annotations:
      controller-gen.kubebuilder.io/version: v0.16.1
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"apiextensions.k8s.io/v1","kind":"CustomResourceDefinition","metadata":{"annotations":{"controller-gen.kubebuilder.io/version":"v0.16.1"},"name":"etcdmembers.etcd.k0sproject.io"},"spec":{"group":"etcd.k0sproject.io","names":{"kind":"EtcdMember","listKind":"EtcdMemberList","plural":"etcdmembers","singular":"etcdmember"},"scope":"Cluster","versions":[{"additionalPrinterColumns":[{"jsonPath":".status.peerAddress","name":"Peer Address","type":"string"},{"jsonPath":".status.memberID","name":"Member ID","type":"string"},{"jsonPath":".status.conditions[?(@.type==\"Joined\")].status","name":"Joined","type":"string"},{"jsonPath":".status.reconcileStatus","name":"Reconcile Status","type":"string"}],"name":"v1beta1","schema":{"openAPIV3Schema":{"description":"EtcdMember describes the nodes etcd membership status","properties":{"apiVersion":{"description":"APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources","type":"string"},"kind":{"description":"Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds","type":"string"},"metadata":{"type":"object"},"spec":{"description":"EtcdMemberSpec defines the desired state of EtcdMember","properties":{"leave":{"description":"Leave is a flag to indicate that the member should be removed from the cluster","type":"boolean"}},"type":"object"},"status":{"properties":{"conditions":{"items":{"properties":{"lastTransitionTime":{"description":"Last time the condition transitioned from one status to another.","format":"date-time","type":"string"},"message":{"description":"Human-readable message indicating details about last transition.","type":"string"},"status":{"enum":["True","False","Unknown"],"type":"string"},"type":{"enum":["Joined"],"type":"string"}},"required":["status","type"],"type":"object"},"type":"array","x-kubernetes-list-map-keys":["type"],"x-kubernetes-list-type":"map"},"memberID":{"description":"MemberID is the unique identifier of the etcd member.\nThe hex form ID is stored as string","pattern":"^[a-fA-F0-9]+$","type":"string"},"message":{"type":"string"},"peerAddress":{"description":"PeerAddress is the address of the etcd peer","type":"string"},"reconcileStatus":{"description":"ReconcileStatus is the last status of the reconcile process","type":"string"}},"required":["memberID","peerAddress"],"type":"object"}},"type":"object"}},"served":true,"storage":true,"subresources":{"status":{}}}]}}
      k0s.k0sproject.io/stack-checksum: 61d65397e90daf9d5fed9533e46e61f8
    creationTimestamp: "2024-12-28T20:26:58Z"
    generation: 1
    labels:
      k0s.k0sproject.io/stack: etcd-member
    name: etcdmembers.etcd.k0sproject.io
    resourceVersion: "208"
    uid: 377b698d-2806-4143-96ed-7d91101cdf45
  spec:
    conversion:
      strategy: None
    group: etcd.k0sproject.io
    names:
      kind: EtcdMember
      listKind: EtcdMemberList
      plural: etcdmembers
      singular: etcdmember
    scope: Cluster
    versions:
    - additionalPrinterColumns:
      - jsonPath: .status.peerAddress
        name: Peer Address
        type: string
      - jsonPath: .status.memberID
        name: Member ID
        type: string
      - jsonPath: .status.conditions[?(@.type=="Joined")].status
        name: Joined
        type: string
      - jsonPath: .status.reconcileStatus
        name: Reconcile Status
        type: string
      name: v1beta1
      schema:
        openAPIV3Schema:
          description: EtcdMember describes the nodes etcd membership status
          properties:
            apiVersion:
              description: |-
                APIVersion defines the versioned schema of this representation of an object.
                Servers should convert recognized schemas to the latest internal value, and
                may reject unrecognized values.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
              type: string
            kind:
              description: |-
                Kind is a string value representing the REST resource this object represents.
                Servers may infer this from the endpoint the client submits requests to.
                Cannot be updated.
                In CamelCase.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
              type: string
            metadata:
              type: object
            spec:
              description: EtcdMemberSpec defines the desired state of EtcdMember
              properties:
                leave:
                  description: Leave is a flag to indicate that the member should
                    be removed from the cluster
                  type: boolean
              type: object
            status:
              properties:
                conditions:
                  items:
                    properties:
                      lastTransitionTime:
                        description: Last time the condition transitioned from one
                          status to another.
                        format: date-time
                        type: string
                      message:
                        description: Human-readable message indicating details about
                          last transition.
                        type: string
                      status:
                        enum:
                        - "True"
                        - "False"
                        - Unknown
                        type: string
                      type:
                        enum:
                        - Joined
                        type: string
                    required:
                    - status
                    - type
                    type: object
                  type: array
                  x-kubernetes-list-map-keys:
                  - type
                  x-kubernetes-list-type: map
                memberID:
                  description: |-
                    MemberID is the unique identifier of the etcd member.
                    The hex form ID is stored as string
                  pattern: ^[a-fA-F0-9]+$
                  type: string
                message:
                  type: string
                peerAddress:
                  description: PeerAddress is the address of the etcd peer
                  type: string
                reconcileStatus:
                  description: ReconcileStatus is the last status of the reconcile
                    process
                  type: string
              required:
              - memberID
              - peerAddress
              type: object
          type: object
      served: true
      storage: true
      subresources:
        status: {}
  status:
    acceptedNames:
      kind: EtcdMember
      listKind: EtcdMemberList
      plural: etcdmembers
      singular: etcdmember
    conditions:
    - lastTransitionTime: "2024-12-28T20:26:58Z"
      message: no conflicts found
      reason: NoConflicts
      status: "True"
      type: NamesAccepted
    - lastTransitionTime: "2024-12-28T20:26:58Z"
      message: the initial names have been accepted
      reason: InitialNamesAccepted
      status: "True"
      type: Established
    storedVersions:
    - v1beta1
- apiVersion: apiextensions.k8s.io/v1
  kind: CustomResourceDefinition
  metadata:
    annotations:
      controller-gen.kubebuilder.io/version: v0.16.1
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"apiextensions.k8s.io/v1","kind":"CustomResourceDefinition","metadata":{"annotations":{"controller-gen.kubebuilder.io/version":"v0.16.1"},"name":"plans.autopilot.k0sproject.io"},"spec":{"group":"autopilot.k0sproject.io","names":{"kind":"Plan","listKind":"PlanList","plural":"plans","singular":"plan"},"scope":"Cluster","versions":[{"additionalPrinterColumns":[{"jsonPath":".status.state","name":"State","type":"string"},{"jsonPath":".metadata.creationTimestamp","name":"Age","type":"date"}],"name":"v1beta2","schema":{"openAPIV3Schema":{"description":"Plan provides all details of what to execute as a part of the plan, and\nthe current status of its execution.","properties":{"apiVersion":{"description":"APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources","type":"string"},"kind":{"description":"Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds","type":"string"},"metadata":{"type":"object"},"spec":{"description":"Spec defines how the plan behaves.","properties":{"commands":{"description":"Commands are a collection of all of the commands that need to be executed\nin order for this plan to transition to Completed.","items":{"description":"PlanCommand is a command that can be run within a `Plan`","properties":{"airgapupdate":{"description":"AirgapUpdate is the `AirgapUpdate` command which is responsible for updating a k0s airgap bundle.","properties":{"platforms":{"additionalProperties":{"description":"PlanResourceURL is a remote URL resource.","properties":{"sha256":{"description":"Sha256 provides an optional SHA256 hash of the URL's content for verification.","type":"string"},"url":{"description":"URL is the URL of a downloadable resource.","type":"string"}},"required":["url"],"type":"object"},"description":"Platforms is a map of PlanResourceUrls to platform identifiers, allowing a single k0s airgap\nversion to have multiple Url resources based on platform.","type":"object"},"version":{"description":"Version is the version that `AirgapUpdate` will be upgrading to.","type":"string"},"workers":{"description":"Workers defines how the k0s workers will be discovered and airgap updated.","properties":{"discovery":{"description":"Discovery details how nodes for this target should be discovered.","properties":{"selector":{"description":"Selector provides a kubernetes 'selector' means of identifying target signal nodes.","properties":{"fields":{"description":"Fields is a standard kubernetes field selector (key=value,key=value,...)","type":"string"},"labels":{"description":"Labels is a standard kubernetes label selector (key=value,key=value,...)","type":"string"}},"type":"object"},"static":{"description":"Static provides a static means of identifying target signal nodes.","properties":{"nodes":{"description":"Nodes provides a static set of target signal nodes.","items":{"type":"string"},"type":"array"}},"type":"object"}},"type":"object"},"limits":{"default":{"concurrent":1},"description":"Limits impose various limits and restrictions on how discovery and execution should behave.","properties":{"concurrent":{"default":1,"description":"Concurrent specifies the number of concurrent target executions that can be performed\nwithin this target. (ie. '2' == at most have 2 execute at the same time)","type":"integer"}},"type":"object"}},"required":["discovery"],"type":"object"}},"required":["platforms","version","workers"],"type":"object"},"k0supdate":{"description":"K0sUpdate is the `K0sUpdate` command which is responsible for updating a k0s node (controller/worker)","properties":{"forceupdate":{"description":"ForceUpdate ensures that version checking is ignored and that all updates are applied.","type":"boolean"},"platforms":{"additionalProperties":{"description":"PlanResourceURL is a remote URL resource.","properties":{"sha256":{"description":"Sha256 provides an optional SHA256 hash of the URL's content for verification.","type":"string"},"url":{"description":"URL is the URL of a downloadable resource.","type":"string"}},"required":["url"],"type":"object"},"description":"Platforms is a map of PlanResourceUrls to platform identifiers, allowing a single k0s version\nto have multiple URL resources based on platform.","type":"object"},"targets":{"description":"Targets defines how the controllers/workers should be discovered and upgraded.","properties":{"controllers":{"description":"Controllers defines how k0s controllers will be discovered and executed.","properties":{"discovery":{"description":"Discovery details how nodes for this target should be discovered.","properties":{"selector":{"description":"Selector provides a kubernetes 'selector' means of identifying target signal nodes.","properties":{"fields":{"description":"Fields is a standard kubernetes field selector (key=value,key=value,...)","type":"string"},"labels":{"description":"Labels is a standard kubernetes label selector (key=value,key=value,...)","type":"string"}},"type":"object"},"static":{"description":"Static provides a static means of identifying target signal nodes.","properties":{"nodes":{"description":"Nodes provides a static set of target signal nodes.","items":{"type":"string"},"type":"array"}},"type":"object"}},"type":"object"},"limits":{"default":{"concurrent":1},"description":"Limits impose various limits and restrictions on how discovery and execution should behave.","properties":{"concurrent":{"default":1,"description":"Concurrent specifies the number of concurrent target executions that can be performed\nwithin this target. (ie. '2' == at most have 2 execute at the same time)","type":"integer"}},"type":"object"}},"required":["discovery"],"type":"object"},"workers":{"description":"Workers defines how k0s workers will be discovered and executed.","properties":{"discovery":{"description":"Discovery details how nodes for this target should be discovered.","properties":{"selector":{"description":"Selector provides a kubernetes 'selector' means of identifying target signal nodes.","properties":{"fields":{"description":"Fields is a standard kubernetes field selector (key=value,key=value,...)","type":"string"},"labels":{"description":"Labels is a standard kubernetes label selector (key=value,key=value,...)","type":"string"}},"type":"object"},"static":{"description":"Static provides a static means of identifying target signal nodes.","properties":{"nodes":{"description":"Nodes provides a static set of target signal nodes.","items":{"type":"string"},"type":"array"}},"type":"object"}},"type":"object"},"limits":{"default":{"concurrent":1},"description":"Limits impose various limits and restrictions on how discovery and execution should behave.","properties":{"concurrent":{"default":1,"description":"Concurrent specifies the number of concurrent target executions that can be performed\nwithin this target. (ie. '2' == at most have 2 execute at the same time)","type":"integer"}},"type":"object"}},"required":["discovery"],"type":"object"}},"type":"object"},"version":{"description":"Version is the version that `K0sUpdate` will be upgrading to.","type":"string"}},"required":["platforms","targets","version"],"type":"object"}},"type":"object"},"type":"array"},"id":{"description":"ID is a user-provided identifier for this plan.","type":"string"},"timestamp":{"description":"Timestamp is a user-provided time that the plan was created.","type":"string"}},"required":["commands","id","timestamp"],"type":"object"},"status":{"description":"Status is the most recently observed status of the plan.","properties":{"commands":{"description":"Commands are a collection of status's for each of the commands defined in the plan,\nmaintained in their index order.","items":{"description":"PlanCommandStatus is the status of a known command.","properties":{"airgapupdate":{"description":"AirgapUpdate is the status of the `AirgapUpdate` command.","properties":{"workers":{"description":"Workers are a collection of status for resolved k0s worker targets.","items":{"description":"PlanCommandTargetStatus is the status of a resolved node (controller/worker).","properties":{"lastUpdatedTimestamp":{"description":"LastUpdatedTimestamp is a timestamp of the last time the status has changed.","format":"date-time","type":"string"},"name":{"description":"Name the name of the target signal node.","type":"string"},"state":{"description":"State is the current state of the target signal nodes operation.","type":"string"}},"required":["lastUpdatedTimestamp","name","state"],"type":"object"},"type":"array"}},"type":"object"},"description":{"description":"Description is the additional information about the plan command state.","type":"string"},"id":{"description":"ID is a unique identifier for this command in a Plan","type":"integer"},"k0supdate":{"description":"K0sUpdate is the status of the `K0sUpdate` command.","properties":{"controllers":{"description":"Controllers are a collection of status for resolved k0s controller targets.","items":{"description":"PlanCommandTargetStatus is the status of a resolved node (controller/worker).","properties":{"lastUpdatedTimestamp":{"description":"LastUpdatedTimestamp is a timestamp of the last time the status has changed.","format":"date-time","type":"string"},"name":{"description":"Name the name of the target signal node.","type":"string"},"state":{"description":"State is the current state of the target signal nodes operation.","type":"string"}},"required":["lastUpdatedTimestamp","name","state"],"type":"object"},"type":"array"},"workers":{"description":"Workers are a collection of status for resolved k0s worker targets.","items":{"description":"PlanCommandTargetStatus is the status of a resolved node (controller/worker).","properties":{"lastUpdatedTimestamp":{"description":"LastUpdatedTimestamp is a timestamp of the last time the status has changed.","format":"date-time","type":"string"},"name":{"description":"Name the name of the target signal node.","type":"string"},"state":{"description":"State is the current state of the target signal nodes operation.","type":"string"}},"required":["lastUpdatedTimestamp","name","state"],"type":"object"},"type":"array"}},"type":"object"},"state":{"description":"State is the current state of the plan command.","type":"string"}},"required":["id","state"],"type":"object"},"type":"array"},"state":{"description":"State is the current state of the plan. This value typically mirrors the status\nof the current command execution to allow for querying a single field to determine\nthe plan status.","type":"string"}},"required":["commands","state"],"type":"object"}},"required":["spec"],"type":"object"}},"served":true,"storage":true,"subresources":{"status":{}}}]}}
      k0s.k0sproject.io/stack-checksum: 4ac9c63d26739fd16023b554ed07b47f
    creationTimestamp: "2024-12-28T20:27:01Z"
    generation: 1
    labels:
      k0s.k0sproject.io/stack: autopilot
    name: plans.autopilot.k0sproject.io
    resourceVersion: "263"
    uid: afb93caa-6666-40aa-aa55-1a5cfbc1875a
  spec:
    conversion:
      strategy: None
    group: autopilot.k0sproject.io
    names:
      kind: Plan
      listKind: PlanList
      plural: plans
      singular: plan
    scope: Cluster
    versions:
    - additionalPrinterColumns:
      - jsonPath: .status.state
        name: State
        type: string
      - jsonPath: .metadata.creationTimestamp
        name: Age
        type: date
      name: v1beta2
      schema:
        openAPIV3Schema:
          description: |-
            Plan provides all details of what to execute as a part of the plan, and
            the current status of its execution.
          properties:
            apiVersion:
              description: |-
                APIVersion defines the versioned schema of this representation of an object.
                Servers should convert recognized schemas to the latest internal value, and
                may reject unrecognized values.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
              type: string
            kind:
              description: |-
                Kind is a string value representing the REST resource this object represents.
                Servers may infer this from the endpoint the client submits requests to.
                Cannot be updated.
                In CamelCase.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
              type: string
            metadata:
              type: object
            spec:
              description: Spec defines how the plan behaves.
              properties:
                commands:
                  description: |-
                    Commands are a collection of all of the commands that need to be executed
                    in order for this plan to transition to Completed.
                  items:
                    description: PlanCommand is a command that can be run within a
                      `Plan`
                    properties:
                      airgapupdate:
                        description: AirgapUpdate is the `AirgapUpdate` command which
                          is responsible for updating a k0s airgap bundle.
                        properties:
                          platforms:
                            additionalProperties:
                              description: PlanResourceURL is a remote URL resource.
                              properties:
                                sha256:
                                  description: Sha256 provides an optional SHA256
                                    hash of the URL's content for verification.
                                  type: string
                                url:
                                  description: URL is the URL of a downloadable resource.
                                  type: string
                              required:
                              - url
                              type: object
                            description: |-
                              Platforms is a map of PlanResourceUrls to platform identifiers, allowing a single k0s airgap
                              version to have multiple Url resources based on platform.
                            type: object
                          version:
                            description: Version is the version that `AirgapUpdate`
                              will be upgrading to.
                            type: string
                          workers:
                            description: Workers defines how the k0s workers will
                              be discovered and airgap updated.
                            properties:
                              discovery:
                                description: Discovery details how nodes for this
                                  target should be discovered.
                                properties:
                                  selector:
                                    description: Selector provides a kubernetes 'selector'
                                      means of identifying target signal nodes.
                                    properties:
                                      fields:
                                        description: Fields is a standard kubernetes
                                          field selector (key=value,key=value,...)
                                        type: string
                                      labels:
                                        description: Labels is a standard kubernetes
                                          label selector (key=value,key=value,...)
                                        type: string
                                    type: object
                                  static:
                                    description: Static provides a static means of
                                      identifying target signal nodes.
                                    properties:
                                      nodes:
                                        description: Nodes provides a static set of
                                          target signal nodes.
                                        items:
                                          type: string
                                        type: array
                                    type: object
                                type: object
                              limits:
                                default:
                                  concurrent: 1
                                description: Limits impose various limits and restrictions
                                  on how discovery and execution should behave.
                                properties:
                                  concurrent:
                                    default: 1
                                    description: |-
                                      Concurrent specifies the number of concurrent target executions that can be performed
                                      within this target. (ie. '2' == at most have 2 execute at the same time)
                                    type: integer
                                type: object
                            required:
                            - discovery
                            type: object
                        required:
                        - platforms
                        - version
                        - workers
                        type: object
                      k0supdate:
                        description: K0sUpdate is the `K0sUpdate` command which is
                          responsible for updating a k0s node (controller/worker)
                        properties:
                          forceupdate:
                            description: ForceUpdate ensures that version checking
                              is ignored and that all updates are applied.
                            type: boolean
                          platforms:
                            additionalProperties:
                              description: PlanResourceURL is a remote URL resource.
                              properties:
                                sha256:
                                  description: Sha256 provides an optional SHA256
                                    hash of the URL's content for verification.
                                  type: string
                                url:
                                  description: URL is the URL of a downloadable resource.
                                  type: string
                              required:
                              - url
                              type: object
                            description: |-
                              Platforms is a map of PlanResourceUrls to platform identifiers, allowing a single k0s version
                              to have multiple URL resources based on platform.
                            type: object
                          targets:
                            description: Targets defines how the controllers/workers
                              should be discovered and upgraded.
                            properties:
                              controllers:
                                description: Controllers defines how k0s controllers
                                  will be discovered and executed.
                                properties:
                                  discovery:
                                    description: Discovery details how nodes for this
                                      target should be discovered.
                                    properties:
                                      selector:
                                        description: Selector provides a kubernetes
                                          'selector' means of identifying target signal
                                          nodes.
                                        properties:
                                          fields:
                                            description: Fields is a standard kubernetes
                                              field selector (key=value,key=value,...)
                                            type: string
                                          labels:
                                            description: Labels is a standard kubernetes
                                              label selector (key=value,key=value,...)
                                            type: string
                                        type: object
                                      static:
                                        description: Static provides a static means
                                          of identifying target signal nodes.
                                        properties:
                                          nodes:
                                            description: Nodes provides a static set
                                              of target signal nodes.
                                            items:
                                              type: string
                                            type: array
                                        type: object
                                    type: object
                                  limits:
                                    default:
                                      concurrent: 1
                                    description: Limits impose various limits and
                                      restrictions on how discovery and execution
                                      should behave.
                                    properties:
                                      concurrent:
                                        default: 1
                                        description: |-
                                          Concurrent specifies the number of concurrent target executions that can be performed
                                          within this target. (ie. '2' == at most have 2 execute at the same time)
                                        type: integer
                                    type: object
                                required:
                                - discovery
                                type: object
                              workers:
                                description: Workers defines how k0s workers will
                                  be discovered and executed.
                                properties:
                                  discovery:
                                    description: Discovery details how nodes for this
                                      target should be discovered.
                                    properties:
                                      selector:
                                        description: Selector provides a kubernetes
                                          'selector' means of identifying target signal
                                          nodes.
                                        properties:
                                          fields:
                                            description: Fields is a standard kubernetes
                                              field selector (key=value,key=value,...)
                                            type: string
                                          labels:
                                            description: Labels is a standard kubernetes
                                              label selector (key=value,key=value,...)
                                            type: string
                                        type: object
                                      static:
                                        description: Static provides a static means
                                          of identifying target signal nodes.
                                        properties:
                                          nodes:
                                            description: Nodes provides a static set
                                              of target signal nodes.
                                            items:
                                              type: string
                                            type: array
                                        type: object
                                    type: object
                                  limits:
                                    default:
                                      concurrent: 1
                                    description: Limits impose various limits and
                                      restrictions on how discovery and execution
                                      should behave.
                                    properties:
                                      concurrent:
                                        default: 1
                                        description: |-
                                          Concurrent specifies the number of concurrent target executions that can be performed
                                          within this target. (ie. '2' == at most have 2 execute at the same time)
                                        type: integer
                                    type: object
                                required:
                                - discovery
                                type: object
                            type: object
                          version:
                            description: Version is the version that `K0sUpdate` will
                              be upgrading to.
                            type: string
                        required:
                        - platforms
                        - targets
                        - version
                        type: object
                    type: object
                  type: array
                id:
                  description: ID is a user-provided identifier for this plan.
                  type: string
                timestamp:
                  description: Timestamp is a user-provided time that the plan was
                    created.
                  type: string
              required:
              - commands
              - id
              - timestamp
              type: object
            status:
              description: Status is the most recently observed status of the plan.
              properties:
                commands:
                  description: |-
                    Commands are a collection of status's for each of the commands defined in the plan,
                    maintained in their index order.
                  items:
                    description: PlanCommandStatus is the status of a known command.
                    properties:
                      airgapupdate:
                        description: AirgapUpdate is the status of the `AirgapUpdate`
                          command.
                        properties:
                          workers:
                            description: Workers are a collection of status for resolved
                              k0s worker targets.
                            items:
                              description: PlanCommandTargetStatus is the status of
                                a resolved node (controller/worker).
                              properties:
                                lastUpdatedTimestamp:
                                  description: LastUpdatedTimestamp is a timestamp
                                    of the last time the status has changed.
                                  format: date-time
                                  type: string
                                name:
                                  description: Name the name of the target signal
                                    node.
                                  type: string
                                state:
                                  description: State is the current state of the target
                                    signal nodes operation.
                                  type: string
                              required:
                              - lastUpdatedTimestamp
                              - name
                              - state
                              type: object
                            type: array
                        type: object
                      description:
                        description: Description is the additional information about
                          the plan command state.
                        type: string
                      id:
                        description: ID is a unique identifier for this command in
                          a Plan
                        type: integer
                      k0supdate:
                        description: K0sUpdate is the status of the `K0sUpdate` command.
                        properties:
                          controllers:
                            description: Controllers are a collection of status for
                              resolved k0s controller targets.
                            items:
                              description: PlanCommandTargetStatus is the status of
                                a resolved node (controller/worker).
                              properties:
                                lastUpdatedTimestamp:
                                  description: LastUpdatedTimestamp is a timestamp
                                    of the last time the status has changed.
                                  format: date-time
                                  type: string
                                name:
                                  description: Name the name of the target signal
                                    node.
                                  type: string
                                state:
                                  description: State is the current state of the target
                                    signal nodes operation.
                                  type: string
                              required:
                              - lastUpdatedTimestamp
                              - name
                              - state
                              type: object
                            type: array
                          workers:
                            description: Workers are a collection of status for resolved
                              k0s worker targets.
                            items:
                              description: PlanCommandTargetStatus is the status of
                                a resolved node (controller/worker).
                              properties:
                                lastUpdatedTimestamp:
                                  description: LastUpdatedTimestamp is a timestamp
                                    of the last time the status has changed.
                                  format: date-time
                                  type: string
                                name:
                                  description: Name the name of the target signal
                                    node.
                                  type: string
                                state:
                                  description: State is the current state of the target
                                    signal nodes operation.
                                  type: string
                              required:
                              - lastUpdatedTimestamp
                              - name
                              - state
                              type: object
                            type: array
                        type: object
                      state:
                        description: State is the current state of the plan command.
                        type: string
                    required:
                    - id
                    - state
                    type: object
                  type: array
                state:
                  description: |-
                    State is the current state of the plan. This value typically mirrors the status
                    of the current command execution to allow for querying a single field to determine
                    the plan status.
                  type: string
              required:
              - commands
              - state
              type: object
          required:
          - spec
          type: object
      served: true
      storage: true
      subresources:
        status: {}
  status:
    acceptedNames:
      kind: Plan
      listKind: PlanList
      plural: plans
      singular: plan
    conditions:
    - lastTransitionTime: "2024-12-28T20:27:01Z"
      message: no conflicts found
      reason: NoConflicts
      status: "True"
      type: NamesAccepted
    - lastTransitionTime: "2024-12-28T20:27:01Z"
      message: the initial names have been accepted
      reason: InitialNamesAccepted
      status: "True"
      type: Established
    storedVersions:
    - v1beta2
- apiVersion: apiextensions.k8s.io/v1
  kind: CustomResourceDefinition
  metadata:
    annotations:
      controller-gen.kubebuilder.io/version: v0.16.1
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"apiextensions.k8s.io/v1","kind":"CustomResourceDefinition","metadata":{"annotations":{"controller-gen.kubebuilder.io/version":"v0.16.1"},"name":"updateconfigs.autopilot.k0sproject.io"},"spec":{"group":"autopilot.k0sproject.io","names":{"kind":"UpdateConfig","listKind":"UpdateConfigList","plural":"updateconfigs","singular":"updateconfig"},"scope":"Cluster","versions":[{"name":"v1beta2","schema":{"openAPIV3Schema":{"properties":{"apiVersion":{"description":"APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources","type":"string"},"kind":{"description":"Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds","type":"string"},"metadata":{"type":"object"},"spec":{"properties":{"channel":{"default":"stable","description":"Channel defines the update channel to use for this update config","type":"string"},"planSpec":{"description":"PlanSpec defines the plan spec to use for this update config","properties":{"commands":{"description":"Commands are a collection of all of the commands that need to be executed\nin order for this plan to transition to Completed.","items":{"description":"AutopilotPlanCommand is a command that can be run within a `Plan`","properties":{"airgapupdate":{"description":"AirgapUpdate is the `AirgapUpdate` command which is responsible for updating a k0s airgap bundle.","properties":{"workers":{"description":"Workers defines how the k0s workers will be discovered and airgap updated.","properties":{"discovery":{"description":"Discovery details how nodes for this target should be discovered.","properties":{"selector":{"description":"Selector provides a kubernetes 'selector' means of identifying target signal nodes.","properties":{"fields":{"description":"Fields is a standard kubernetes field selector (key=value,key=value,...)","type":"string"},"labels":{"description":"Labels is a standard kubernetes label selector (key=value,key=value,...)","type":"string"}},"type":"object"},"static":{"description":"Static provides a static means of identifying target signal nodes.","properties":{"nodes":{"description":"Nodes provides a static set of target signal nodes.","items":{"type":"string"},"type":"array"}},"type":"object"}},"type":"object"},"limits":{"default":{"concurrent":1},"description":"Limits impose various limits and restrictions on how discovery and execution should behave.","properties":{"concurrent":{"default":1,"description":"Concurrent specifies the number of concurrent target executions that can be performed\nwithin this target. (ie. '2' == at most have 2 execute at the same time)","type":"integer"}},"type":"object"}},"required":["discovery"],"type":"object"}},"required":["workers"],"type":"object"},"k0supdate":{"description":"K0sUpdate is the `K0sUpdate` command which is responsible for updating a k0s node (controller/worker)","properties":{"forceupdate":{"description":"ForceUpdate ensures that version checking is ignored and that all updates are applied.","type":"boolean"},"targets":{"description":"Targets defines how the controllers/workers should be discovered and upgraded.","properties":{"controllers":{"description":"Controllers defines how k0s controllers will be discovered and executed.","properties":{"discovery":{"description":"Discovery details how nodes for this target should be discovered.","properties":{"selector":{"description":"Selector provides a kubernetes 'selector' means of identifying target signal nodes.","properties":{"fields":{"description":"Fields is a standard kubernetes field selector (key=value,key=value,...)","type":"string"},"labels":{"description":"Labels is a standard kubernetes label selector (key=value,key=value,...)","type":"string"}},"type":"object"},"static":{"description":"Static provides a static means of identifying target signal nodes.","properties":{"nodes":{"description":"Nodes provides a static set of target signal nodes.","items":{"type":"string"},"type":"array"}},"type":"object"}},"type":"object"},"limits":{"default":{"concurrent":1},"description":"Limits impose various limits and restrictions on how discovery and execution should behave.","properties":{"concurrent":{"default":1,"description":"Concurrent specifies the number of concurrent target executions that can be performed\nwithin this target. (ie. '2' == at most have 2 execute at the same time)","type":"integer"}},"type":"object"}},"required":["discovery"],"type":"object"},"workers":{"description":"Workers defines how k0s workers will be discovered and executed.","properties":{"discovery":{"description":"Discovery details how nodes for this target should be discovered.","properties":{"selector":{"description":"Selector provides a kubernetes 'selector' means of identifying target signal nodes.","properties":{"fields":{"description":"Fields is a standard kubernetes field selector (key=value,key=value,...)","type":"string"},"labels":{"description":"Labels is a standard kubernetes label selector (key=value,key=value,...)","type":"string"}},"type":"object"},"static":{"description":"Static provides a static means of identifying target signal nodes.","properties":{"nodes":{"description":"Nodes provides a static set of target signal nodes.","items":{"type":"string"},"type":"array"}},"type":"object"}},"type":"object"},"limits":{"default":{"concurrent":1},"description":"Limits impose various limits and restrictions on how discovery and execution should behave.","properties":{"concurrent":{"default":1,"description":"Concurrent specifies the number of concurrent target executions that can be performed\nwithin this target. (ie. '2' == at most have 2 execute at the same time)","type":"integer"}},"type":"object"}},"required":["discovery"],"type":"object"}},"type":"object"}},"required":["targets"],"type":"object"}},"type":"object"},"type":"array"}},"required":["commands"],"type":"object"},"updateServer":{"default":"https://updates.k0sproject.io","description":"UpdateServer defines the update server to use for this update config","type":"string"},"upgradeStrategy":{"description":"UpdateStrategy defines the update strategy to use for this update config","properties":{"cron":{"description":"Cron defines the cron expression for the cron upgrade strategy\nDeprecated: Cron is deprecated and will eventually be ignored","type":"string"},"periodic":{"description":"Periodic defines the periodic upgrade strategy","properties":{"days":{"items":{"type":"string"},"type":"array"},"length":{"type":"string"},"startTime":{"type":"string"}},"type":"object"},"type":{"description":"Type defines the type of upgrade strategy","enum":["periodic","cron"],"type":"string"}},"type":"object"}},"type":"object"}},"required":["spec"],"type":"object"}},"served":true,"storage":true}]}}
      k0s.k0sproject.io/stack-checksum: 6ad67fcc763ee0bf55c3e1a1dfa97875
    creationTimestamp: "2024-12-28T20:27:02Z"
    generation: 1
    labels:
      k0s.k0sproject.io/stack: autopilot
    name: updateconfigs.autopilot.k0sproject.io
    resourceVersion: "284"
    uid: 2d524049-a9df-4688-a43b-23f329c8068c
  spec:
    conversion:
      strategy: None
    group: autopilot.k0sproject.io
    names:
      kind: UpdateConfig
      listKind: UpdateConfigList
      plural: updateconfigs
      singular: updateconfig
    scope: Cluster
    versions:
    - name: v1beta2
      schema:
        openAPIV3Schema:
          properties:
            apiVersion:
              description: |-
                APIVersion defines the versioned schema of this representation of an object.
                Servers should convert recognized schemas to the latest internal value, and
                may reject unrecognized values.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
              type: string
            kind:
              description: |-
                Kind is a string value representing the REST resource this object represents.
                Servers may infer this from the endpoint the client submits requests to.
                Cannot be updated.
                In CamelCase.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
              type: string
            metadata:
              type: object
            spec:
              properties:
                channel:
                  default: stable
                  description: Channel defines the update channel to use for this
                    update config
                  type: string
                planSpec:
                  description: PlanSpec defines the plan spec to use for this update
                    config
                  properties:
                    commands:
                      description: |-
                        Commands are a collection of all of the commands that need to be executed
                        in order for this plan to transition to Completed.
                      items:
                        description: AutopilotPlanCommand is a command that can be
                          run within a `Plan`
                        properties:
                          airgapupdate:
                            description: AirgapUpdate is the `AirgapUpdate` command
                              which is responsible for updating a k0s airgap bundle.
                            properties:
                              workers:
                                description: Workers defines how the k0s workers will
                                  be discovered and airgap updated.
                                properties:
                                  discovery:
                                    description: Discovery details how nodes for this
                                      target should be discovered.
                                    properties:
                                      selector:
                                        description: Selector provides a kubernetes
                                          'selector' means of identifying target signal
                                          nodes.
                                        properties:
                                          fields:
                                            description: Fields is a standard kubernetes
                                              field selector (key=value,key=value,...)
                                            type: string
                                          labels:
                                            description: Labels is a standard kubernetes
                                              label selector (key=value,key=value,...)
                                            type: string
                                        type: object
                                      static:
                                        description: Static provides a static means
                                          of identifying target signal nodes.
                                        properties:
                                          nodes:
                                            description: Nodes provides a static set
                                              of target signal nodes.
                                            items:
                                              type: string
                                            type: array
                                        type: object
                                    type: object
                                  limits:
                                    default:
                                      concurrent: 1
                                    description: Limits impose various limits and
                                      restrictions on how discovery and execution
                                      should behave.
                                    properties:
                                      concurrent:
                                        default: 1
                                        description: |-
                                          Concurrent specifies the number of concurrent target executions that can be performed
                                          within this target. (ie. '2' == at most have 2 execute at the same time)
                                        type: integer
                                    type: object
                                required:
                                - discovery
                                type: object
                            required:
                            - workers
                            type: object
                          k0supdate:
                            description: K0sUpdate is the `K0sUpdate` command which
                              is responsible for updating a k0s node (controller/worker)
                            properties:
                              forceupdate:
                                description: ForceUpdate ensures that version checking
                                  is ignored and that all updates are applied.
                                type: boolean
                              targets:
                                description: Targets defines how the controllers/workers
                                  should be discovered and upgraded.
                                properties:
                                  controllers:
                                    description: Controllers defines how k0s controllers
                                      will be discovered and executed.
                                    properties:
                                      discovery:
                                        description: Discovery details how nodes for
                                          this target should be discovered.
                                        properties:
                                          selector:
                                            description: Selector provides a kubernetes
                                              'selector' means of identifying target
                                              signal nodes.
                                            properties:
                                              fields:
                                                description: Fields is a standard
                                                  kubernetes field selector (key=value,key=value,...)
                                                type: string
                                              labels:
                                                description: Labels is a standard
                                                  kubernetes label selector (key=value,key=value,...)
                                                type: string
                                            type: object
                                          static:
                                            description: Static provides a static
                                              means of identifying target signal nodes.
                                            properties:
                                              nodes:
                                                description: Nodes provides a static
                                                  set of target signal nodes.
                                                items:
                                                  type: string
                                                type: array
                                            type: object
                                        type: object
                                      limits:
                                        default:
                                          concurrent: 1
                                        description: Limits impose various limits
                                          and restrictions on how discovery and execution
                                          should behave.
                                        properties:
                                          concurrent:
                                            default: 1
                                            description: |-
                                              Concurrent specifies the number of concurrent target executions that can be performed
                                              within this target. (ie. '2' == at most have 2 execute at the same time)
                                            type: integer
                                        type: object
                                    required:
                                    - discovery
                                    type: object
                                  workers:
                                    description: Workers defines how k0s workers will
                                      be discovered and executed.
                                    properties:
                                      discovery:
                                        description: Discovery details how nodes for
                                          this target should be discovered.
                                        properties:
                                          selector:
                                            description: Selector provides a kubernetes
                                              'selector' means of identifying target
                                              signal nodes.
                                            properties:
                                              fields:
                                                description: Fields is a standard
                                                  kubernetes field selector (key=value,key=value,...)
                                                type: string
                                              labels:
                                                description: Labels is a standard
                                                  kubernetes label selector (key=value,key=value,...)
                                                type: string
                                            type: object
                                          static:
                                            description: Static provides a static
                                              means of identifying target signal nodes.
                                            properties:
                                              nodes:
                                                description: Nodes provides a static
                                                  set of target signal nodes.
                                                items:
                                                  type: string
                                                type: array
                                            type: object
                                        type: object
                                      limits:
                                        default:
                                          concurrent: 1
                                        description: Limits impose various limits
                                          and restrictions on how discovery and execution
                                          should behave.
                                        properties:
                                          concurrent:
                                            default: 1
                                            description: |-
                                              Concurrent specifies the number of concurrent target executions that can be performed
                                              within this target. (ie. '2' == at most have 2 execute at the same time)
                                            type: integer
                                        type: object
                                    required:
                                    - discovery
                                    type: object
                                type: object
                            required:
                            - targets
                            type: object
                        type: object
                      type: array
                  required:
                  - commands
                  type: object
                updateServer:
                  default: https://updates.k0sproject.io
                  description: UpdateServer defines the update server to use for this
                    update config
                  type: string
                upgradeStrategy:
                  description: UpdateStrategy defines the update strategy to use for
                    this update config
                  properties:
                    cron:
                      description: |-
                        Cron defines the cron expression for the cron upgrade strategy
                        Deprecated: Cron is deprecated and will eventually be ignored
                      type: string
                    periodic:
                      description: Periodic defines the periodic upgrade strategy
                      properties:
                        days:
                          items:
                            type: string
                          type: array
                        length:
                          type: string
                        startTime:
                          type: string
                      type: object
                    type:
                      description: Type defines the type of upgrade strategy
                      enum:
                      - periodic
                      - cron
                      type: string
                  type: object
              type: object
          required:
          - spec
          type: object
      served: true
      storage: true
  status:
    acceptedNames:
      kind: UpdateConfig
      listKind: UpdateConfigList
      plural: updateconfigs
      singular: updateconfig
    conditions:
    - lastTransitionTime: "2024-12-28T20:27:02Z"
      message: no conflicts found
      reason: NoConflicts
      status: "True"
      type: NamesAccepted
    - lastTransitionTime: "2024-12-28T20:27:02Z"
      message: the initial names have been accepted
      reason: InitialNamesAccepted
      status: "True"
      type: Established
    storedVersions:
    - v1beta2
- apiVersion: v1
  data:
    ca.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDADCCAeigAwIBAgIUShVLK2muIar/bNk5tstDTt3TLJYwDQYJKoZIhvcNAQEL
      BQAwGDEWMBQGA1UEAxMNa3ViZXJuZXRlcy1jYTAeFw0yNDEyMjgyMDIyMDBaFw0z
      NDEyMjYyMDIyMDBaMBgxFjAUBgNVBAMTDWt1YmVybmV0ZXMtY2EwggEiMA0GCSqG
      SIb3DQEBAQUAA4IBDwAwggEKAoIBAQDPaL1VY0adw3Ox8838VbkH3wkignPN596I
      bhOFJwz5LmmzVfBkmEPRXUHvRKnaxC3BkJOwT6SjqfcekYDSmQY+NXJQhNkhhjsJ
      n86jgFFSzV+CQiyFTXH0oy3f+jWnnUTr4mf313G5Mk7x2RVh23ccmPhVK84fxW9U
      iRTbn+92ot/gkzgoqYTtkQ1YMg3hXpJcX0b5ITnvHNlN6s6KNt8aYC/H6CrxAQdV
      67SeYK4drgz5xDwNC8cVDqO5Lp1o4Rp5N+lyULEU50HPsPk+b5x3c268ui7aicjo
      dDEN6wakthlm8Q3MflGquiJWX920qB27niu239FQTzX/3pWKpmEHAgMBAAGjQjBA
      MA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBReo6dT
      qoFVUOaWjtNGOk7DxXsTMjANBgkqhkiG9w0BAQsFAAOCAQEAVCcXhDBEEvAcskvG
      H+InSdocTzUl4FFUgvGfUFYfXrLpQAL52krnAktKqXx0AHwTe2Eh4vNmD48d96mi
      +sSPX5PEZN++NIoiBNJwKk4sSEqf+4jE7uPzeVwThfQZMJoG5z140/Zgp6cNrkgx
      hEKZ6+9PcY6uQ5SJ/BakzHF5y1QrV1Tg/Nn8HkzRjLnSACYiTd5LRMjH84lr/Jpc
      NmtOz5B8YfoQSvI0gIX0gxuqz1C9/WorvxDqZ+viSyu4e0GW+t0SgDg8pZJWxw8l
      bP52zPuDdxyUfndjW6fWGVlmPdS/opNCjvefT2cGNe1myPmoZqrJLTypS80igsDT
      0ot31g==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    annotations:
      kubernetes.io/description: Contains a CA bundle that can be used to verify the
        kube-apiserver when using internal endpoints such as the internal service
        IP or kubernetes.default.svc. No other usage is guaranteed across distributions
        of Kubernetes clusters.
    creationTimestamp: "2024-12-28T20:27:04Z"
    name: kube-root-ca.crt
    namespace: default
    resourceVersion: "306"
    uid: b29be01a-9a9e-4c23-847b-d2dea55ba0e1
- apiVersion: v1
  data:
    ca.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDADCCAeigAwIBAgIUShVLK2muIar/bNk5tstDTt3TLJYwDQYJKoZIhvcNAQEL
      BQAwGDEWMBQGA1UEAxMNa3ViZXJuZXRlcy1jYTAeFw0yNDEyMjgyMDIyMDBaFw0z
      NDEyMjYyMDIyMDBaMBgxFjAUBgNVBAMTDWt1YmVybmV0ZXMtY2EwggEiMA0GCSqG
      SIb3DQEBAQUAA4IBDwAwggEKAoIBAQDPaL1VY0adw3Ox8838VbkH3wkignPN596I
      bhOFJwz5LmmzVfBkmEPRXUHvRKnaxC3BkJOwT6SjqfcekYDSmQY+NXJQhNkhhjsJ
      n86jgFFSzV+CQiyFTXH0oy3f+jWnnUTr4mf313G5Mk7x2RVh23ccmPhVK84fxW9U
      iRTbn+92ot/gkzgoqYTtkQ1YMg3hXpJcX0b5ITnvHNlN6s6KNt8aYC/H6CrxAQdV
      67SeYK4drgz5xDwNC8cVDqO5Lp1o4Rp5N+lyULEU50HPsPk+b5x3c268ui7aicjo
      dDEN6wakthlm8Q3MflGquiJWX920qB27niu239FQTzX/3pWKpmEHAgMBAAGjQjBA
      MA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBReo6dT
      qoFVUOaWjtNGOk7DxXsTMjANBgkqhkiG9w0BAQsFAAOCAQEAVCcXhDBEEvAcskvG
      H+InSdocTzUl4FFUgvGfUFYfXrLpQAL52krnAktKqXx0AHwTe2Eh4vNmD48d96mi
      +sSPX5PEZN++NIoiBNJwKk4sSEqf+4jE7uPzeVwThfQZMJoG5z140/Zgp6cNrkgx
      hEKZ6+9PcY6uQ5SJ/BakzHF5y1QrV1Tg/Nn8HkzRjLnSACYiTd5LRMjH84lr/Jpc
      NmtOz5B8YfoQSvI0gIX0gxuqz1C9/WorvxDqZ+viSyu4e0GW+t0SgDg8pZJWxw8l
      bP52zPuDdxyUfndjW6fWGVlmPdS/opNCjvefT2cGNe1myPmoZqrJLTypS80igsDT
      0ot31g==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    annotations:
      kubernetes.io/description: Contains a CA bundle that can be used to verify the
        kube-apiserver when using internal endpoints such as the internal service
        IP or kubernetes.default.svc. No other usage is guaranteed across distributions
        of Kubernetes clusters.
    creationTimestamp: "2024-12-28T20:27:04Z"
    name: kube-root-ca.crt
    namespace: k0s-autopilot
    resourceVersion: "307"
    uid: 91172025-c327-46bf-97c1-8d41dd4d1752
- apiVersion: v1
  data:
    ca.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDADCCAeigAwIBAgIUShVLK2muIar/bNk5tstDTt3TLJYwDQYJKoZIhvcNAQEL
      BQAwGDEWMBQGA1UEAxMNa3ViZXJuZXRlcy1jYTAeFw0yNDEyMjgyMDIyMDBaFw0z
      NDEyMjYyMDIyMDBaMBgxFjAUBgNVBAMTDWt1YmVybmV0ZXMtY2EwggEiMA0GCSqG
      SIb3DQEBAQUAA4IBDwAwggEKAoIBAQDPaL1VY0adw3Ox8838VbkH3wkignPN596I
      bhOFJwz5LmmzVfBkmEPRXUHvRKnaxC3BkJOwT6SjqfcekYDSmQY+NXJQhNkhhjsJ
      n86jgFFSzV+CQiyFTXH0oy3f+jWnnUTr4mf313G5Mk7x2RVh23ccmPhVK84fxW9U
      iRTbn+92ot/gkzgoqYTtkQ1YMg3hXpJcX0b5ITnvHNlN6s6KNt8aYC/H6CrxAQdV
      67SeYK4drgz5xDwNC8cVDqO5Lp1o4Rp5N+lyULEU50HPsPk+b5x3c268ui7aicjo
      dDEN6wakthlm8Q3MflGquiJWX920qB27niu239FQTzX/3pWKpmEHAgMBAAGjQjBA
      MA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBReo6dT
      qoFVUOaWjtNGOk7DxXsTMjANBgkqhkiG9w0BAQsFAAOCAQEAVCcXhDBEEvAcskvG
      H+InSdocTzUl4FFUgvGfUFYfXrLpQAL52krnAktKqXx0AHwTe2Eh4vNmD48d96mi
      +sSPX5PEZN++NIoiBNJwKk4sSEqf+4jE7uPzeVwThfQZMJoG5z140/Zgp6cNrkgx
      hEKZ6+9PcY6uQ5SJ/BakzHF5y1QrV1Tg/Nn8HkzRjLnSACYiTd5LRMjH84lr/Jpc
      NmtOz5B8YfoQSvI0gIX0gxuqz1C9/WorvxDqZ+viSyu4e0GW+t0SgDg8pZJWxw8l
      bP52zPuDdxyUfndjW6fWGVlmPdS/opNCjvefT2cGNe1myPmoZqrJLTypS80igsDT
      0ot31g==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    annotations:
      kubernetes.io/description: Contains a CA bundle that can be used to verify the
        kube-apiserver when using internal endpoints such as the internal service
        IP or kubernetes.default.svc. No other usage is guaranteed across distributions
        of Kubernetes clusters.
    creationTimestamp: "2024-12-28T20:27:04Z"
    name: kube-root-ca.crt
    namespace: kube-node-lease
    resourceVersion: "308"
    uid: 214bb806-d267-4cf9-aed7-62915cd1939b
- apiVersion: v1
  data:
    ca.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDADCCAeigAwIBAgIUShVLK2muIar/bNk5tstDTt3TLJYwDQYJKoZIhvcNAQEL
      BQAwGDEWMBQGA1UEAxMNa3ViZXJuZXRlcy1jYTAeFw0yNDEyMjgyMDIyMDBaFw0z
      NDEyMjYyMDIyMDBaMBgxFjAUBgNVBAMTDWt1YmVybmV0ZXMtY2EwggEiMA0GCSqG
      SIb3DQEBAQUAA4IBDwAwggEKAoIBAQDPaL1VY0adw3Ox8838VbkH3wkignPN596I
      bhOFJwz5LmmzVfBkmEPRXUHvRKnaxC3BkJOwT6SjqfcekYDSmQY+NXJQhNkhhjsJ
      n86jgFFSzV+CQiyFTXH0oy3f+jWnnUTr4mf313G5Mk7x2RVh23ccmPhVK84fxW9U
      iRTbn+92ot/gkzgoqYTtkQ1YMg3hXpJcX0b5ITnvHNlN6s6KNt8aYC/H6CrxAQdV
      67SeYK4drgz5xDwNC8cVDqO5Lp1o4Rp5N+lyULEU50HPsPk+b5x3c268ui7aicjo
      dDEN6wakthlm8Q3MflGquiJWX920qB27niu239FQTzX/3pWKpmEHAgMBAAGjQjBA
      MA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBReo6dT
      qoFVUOaWjtNGOk7DxXsTMjANBgkqhkiG9w0BAQsFAAOCAQEAVCcXhDBEEvAcskvG
      H+InSdocTzUl4FFUgvGfUFYfXrLpQAL52krnAktKqXx0AHwTe2Eh4vNmD48d96mi
      +sSPX5PEZN++NIoiBNJwKk4sSEqf+4jE7uPzeVwThfQZMJoG5z140/Zgp6cNrkgx
      hEKZ6+9PcY6uQ5SJ/BakzHF5y1QrV1Tg/Nn8HkzRjLnSACYiTd5LRMjH84lr/Jpc
      NmtOz5B8YfoQSvI0gIX0gxuqz1C9/WorvxDqZ+viSyu4e0GW+t0SgDg8pZJWxw8l
      bP52zPuDdxyUfndjW6fWGVlmPdS/opNCjvefT2cGNe1myPmoZqrJLTypS80igsDT
      0ot31g==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    annotations:
      kubernetes.io/description: Contains a CA bundle that can be used to verify the
        kube-apiserver when using internal endpoints such as the internal service
        IP or kubernetes.default.svc. No other usage is guaranteed across distributions
        of Kubernetes clusters.
    creationTimestamp: "2024-12-28T20:27:04Z"
    name: kube-root-ca.crt
    namespace: kube-public
    resourceVersion: "309"
    uid: a30e2c8f-ddd3-410d-a460-6aa0a571f587
- apiVersion: v1
  data:
    Corefile: |
      .:53 {
          errors
          health
          ready
          kubernetes cluster.local in-addr.arpa ip6.arpa {
            pods insecure
            ttl 30
            fallthrough in-addr.arpa ip6.arpa
          }
          prometheus :9153
          forward . /etc/resolv.conf
          cache 30
          loop
          reload
          loadbalance
      }
  kind: ConfigMap
  metadata:
    annotations:
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"v1","data":{"Corefile":".:53 {\n    errors\n    health\n    ready\n    kubernetes cluster.local in-addr.arpa ip6.arpa {\n      pods insecure\n      ttl 30\n      fallthrough in-addr.arpa ip6.arpa\n    }\n    prometheus :9153\n    forward . /etc/resolv.conf\n    cache 30\n    loop\n    reload\n    loadbalance\n}\n"},"kind":"ConfigMap","metadata":{"name":"coredns","namespace":"kube-system"}}
      k0s.k0sproject.io/stack-checksum: df0a18b174e12f166824f894f447d08f
    creationTimestamp: "2024-12-28T20:27:02Z"
    labels:
      k0s.k0sproject.io/stack: coredns
    name: coredns
    namespace: kube-system
    resourceVersion: "278"
    uid: ead959b3-d206-45de-b232-b3a9b99b35b2
- apiVersion: v1
  data:
    client-ca-file: |
      -----BEGIN CERTIFICATE-----
      MIIDADCCAeigAwIBAgIUShVLK2muIar/bNk5tstDTt3TLJYwDQYJKoZIhvcNAQEL
      BQAwGDEWMBQGA1UEAxMNa3ViZXJuZXRlcy1jYTAeFw0yNDEyMjgyMDIyMDBaFw0z
      NDEyMjYyMDIyMDBaMBgxFjAUBgNVBAMTDWt1YmVybmV0ZXMtY2EwggEiMA0GCSqG
      SIb3DQEBAQUAA4IBDwAwggEKAoIBAQDPaL1VY0adw3Ox8838VbkH3wkignPN596I
      bhOFJwz5LmmzVfBkmEPRXUHvRKnaxC3BkJOwT6SjqfcekYDSmQY+NXJQhNkhhjsJ
      n86jgFFSzV+CQiyFTXH0oy3f+jWnnUTr4mf313G5Mk7x2RVh23ccmPhVK84fxW9U
      iRTbn+92ot/gkzgoqYTtkQ1YMg3hXpJcX0b5ITnvHNlN6s6KNt8aYC/H6CrxAQdV
      67SeYK4drgz5xDwNC8cVDqO5Lp1o4Rp5N+lyULEU50HPsPk+b5x3c268ui7aicjo
      dDEN6wakthlm8Q3MflGquiJWX920qB27niu239FQTzX/3pWKpmEHAgMBAAGjQjBA
      MA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBReo6dT
      qoFVUOaWjtNGOk7DxXsTMjANBgkqhkiG9w0BAQsFAAOCAQEAVCcXhDBEEvAcskvG
      H+InSdocTzUl4FFUgvGfUFYfXrLpQAL52krnAktKqXx0AHwTe2Eh4vNmD48d96mi
      +sSPX5PEZN++NIoiBNJwKk4sSEqf+4jE7uPzeVwThfQZMJoG5z140/Zgp6cNrkgx
      hEKZ6+9PcY6uQ5SJ/BakzHF5y1QrV1Tg/Nn8HkzRjLnSACYiTd5LRMjH84lr/Jpc
      NmtOz5B8YfoQSvI0gIX0gxuqz1C9/WorvxDqZ+viSyu4e0GW+t0SgDg8pZJWxw8l
      bP52zPuDdxyUfndjW6fWGVlmPdS/opNCjvefT2cGNe1myPmoZqrJLTypS80igsDT
      0ot31g==
      -----END CERTIFICATE-----
    requestheader-allowed-names: '["front-proxy-client"]'
    requestheader-client-ca-file: |
      -----BEGIN CERTIFICATE-----
      MIIDGDCCAgCgAwIBAgIUaE+rzrF41hcScAzgeHtHT2KFuWYwDQYJKoZIhvcNAQEL
      BQAwJDEiMCAGA1UEAxMZa3ViZXJuZXRlcy1mcm9udC1wcm94eS1jYTAeFw0yNDEy
      MjgyMDIyMDBaFw0zNDEyMjYyMDIyMDBaMCQxIjAgBgNVBAMTGWt1YmVybmV0ZXMt
      ZnJvbnQtcHJveHktY2EwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC8
      B8J0DryN7ts2BbE0QolGoP7KeDM9uju6Q0JYqmQB4ViBs8wOz+eO8VBteGKIAbqX
      nSOBC9benMvl3UeMOT9BWeQYxZZTTIOQJvjjV0r3TH2BpaOJq8LiLt/SXNUne0Ry
      H1/kAdAALge8jX9BsuDjFyDZqv+Dc3+3n1mcRitPZz4T+rQEW0/EPfx0hQ6QjeLa
      MUhMAeZo72mvEsu9KzigI26dKwy8Ra2n71zOyvfGmm63DJu6ijKF164Q0oBZbfPg
      I6lPNKrrvwzOjy2j9yv4yMTqLlGZkBMvq+6hFNbEDyNKNV8uOxVTknU9DkAhnl9R
      hSAi6vKTWlbxFskO4bFRAgMBAAGjQjBAMA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMB
      Af8EBTADAQH/MB0GA1UdDgQWBBS4nTRnovdVXPFn/yT0QIqnU69xhTANBgkqhkiG
      9w0BAQsFAAOCAQEATybcQmgyczgOPuw38vykWJADk2RYvH/tdvBSORR1yICVZ+Tb
      7rM9nP/YqDPJwzG45JdM/SJEKgbq0qhmyu8c9iTpPK/lxlD25I3rk9TGNTf/cURi
      fY94X2YeGgGY0Pz83+46SjZw6chd7ZBCsPYFNCLavewH0dxm7McJy4aYBbDBhPgh
      Z4QvGBdfAlAOKDJXIb6N76Q2FPvsBDWOuljNE9sQJtQHuJVAyfyGCWuPKYkYxwwA
      7k8D6CrDoBYM1nc0YE81vOMClSQnIn0lk94YxJ2YPuPbDYI6pACEnZhI7yWfnYLY
      kRNukCaWRqvW1j54Zjlz65ryAXxSp4Ji8RcxwQ==
      -----END CERTIFICATE-----
    requestheader-extra-headers-prefix: '["X-Remote-Extra-"]'
    requestheader-group-headers: '["X-Remote-Group"]'
    requestheader-username-headers: '["X-Remote-User"]'
  kind: ConfigMap
  metadata:
    creationTimestamp: "2024-12-28T20:26:55Z"
    name: extension-apiserver-authentication
    namespace: kube-system
    resourceVersion: "20"
    uid: 53ec4d00-580e-4808-adaa-3bf67d65b2e9
- apiVersion: v1
  data:
    since: "2024-12-28"
  kind: ConfigMap
  metadata:
    creationTimestamp: "2024-12-28T20:26:55Z"
    name: kube-apiserver-legacy-service-account-token-tracking
    namespace: kube-system
    resourceVersion: "56"
    uid: a8869b25-3768-4a4c-8670-80ed7fb3a461
- apiVersion: v1
  data:
    config.conf: |-
      apiVersion: kubeproxy.config.k8s.io/v1alpha1
      bindAddress: 0.0.0.0
      clientConnection:
        acceptContentTypes: ""
        burst: 0
        contentType: ""
        kubeconfig: /var/lib/kube-proxy/kubeconfig.conf
        qps: 0
      clusterCIDR: 10.244.0.0/16
      configSyncPeriod: 0s
      featureGates:
      mode: "iptables"
      conntrack:
        maxPerCore: 0
        min: null
        tcpCloseWaitTimeout: null
        tcpEstablishedTimeout: null
      detectLocalMode: ""
      enableProfiling: false
      healthzBindAddress: ""
      hostnameOverride: ""
      iptables: {"syncPeriod":"0s","minSyncPeriod":"0s"}
      ipvs: {"syncPeriod":"0s","minSyncPeriod":"0s","tcpTimeout":"0s","tcpFinTimeout":"0s","udpTimeout":"0s"}
      nftables: {"syncPeriod":"0s","minSyncPeriod":"0s"}
      kind: KubeProxyConfiguration
      metricsBindAddress: 0.0.0.0:10249
      nodePortAddresses: null
      oomScoreAdj: null
      portRange: ""
      showHiddenMetricsForVersion: ""
      udpIdleTimeout: 0s
      winkernel:
        enableDSR: false
        networkName: ""
        sourceVip: ""
    kubeconfig.conf: |-
      apiVersion: v1
      kind: Config
      clusters:
      - cluster:
          certificate-authority: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
          server: https://172.17.0.2:6443
        name: default
      contexts:
      - context:
          cluster: default
          namespace: default
          user: default
        name: default
      current-context: default
      users:
      - name: default
        user:
          tokenFile: /var/run/secrets/kubernetes.io/serviceaccount/token
  kind: ConfigMap
  metadata:
    annotations:
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"v1","data":{"config.conf":"apiVersion: kubeproxy.config.k8s.io/v1alpha1\nbindAddress: 0.0.0.0\nclientConnection:\n  acceptContentTypes: \"\"\n  burst: 0\n  contentType: \"\"\n  kubeconfig: /var/lib/kube-proxy/kubeconfig.conf\n  qps: 0\nclusterCIDR: 10.244.0.0/16\nconfigSyncPeriod: 0s\nfeatureGates:\nmode: \"iptables\"\nconntrack:\n  maxPerCore: 0\n  min: null\n  tcpCloseWaitTimeout: null\n  tcpEstablishedTimeout: null\ndetectLocalMode: \"\"\nenableProfiling: false\nhealthzBindAddress: \"\"\nhostnameOverride: \"\"\niptables: {\"syncPeriod\":\"0s\",\"minSyncPeriod\":\"0s\"}\nipvs: {\"syncPeriod\":\"0s\",\"minSyncPeriod\":\"0s\",\"tcpTimeout\":\"0s\",\"tcpFinTimeout\":\"0s\",\"udpTimeout\":\"0s\"}\nnftables: {\"syncPeriod\":\"0s\",\"minSyncPeriod\":\"0s\"}\nkind: KubeProxyConfiguration\nmetricsBindAddress: 0.0.0.0:10249\nnodePortAddresses: null\noomScoreAdj: null\nportRange: \"\"\nshowHiddenMetricsForVersion: \"\"\nudpIdleTimeout: 0s\nwinkernel:\n  enableDSR: false\n  networkName: \"\"\n  sourceVip: \"\"","kubeconfig.conf":"apiVersion: v1\nkind: Config\nclusters:\n- cluster:\n    certificate-authority: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt\n    server: https://172.17.0.2:6443\n  name: default\ncontexts:\n- context:\n    cluster: default\n    namespace: default\n    user: default\n  name: default\ncurrent-context: default\nusers:\n- name: default\n  user:\n    tokenFile: /var/run/secrets/kubernetes.io/serviceaccount/token"},"kind":"ConfigMap","metadata":{"labels":{"app":"kube-proxy"},"name":"kube-proxy","namespace":"kube-system"}}
      k0s.k0sproject.io/stack-checksum: 795cff3ffa4a347ab278325781f8f1ed
    creationTimestamp: "2024-12-28T20:27:02Z"
    labels:
#TBR:      app: kube-proxy
      k0s.k0sproject.io/stack: kubeproxy
    name: kube-proxy
    namespace: kube-system
    resourceVersion: "288"
    uid: 906d37f7-2135-4acc-ad26-361c477c88c6
- apiVersion: v1
  data:
    ca.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDADCCAeigAwIBAgIUShVLK2muIar/bNk5tstDTt3TLJYwDQYJKoZIhvcNAQEL
      BQAwGDEWMBQGA1UEAxMNa3ViZXJuZXRlcy1jYTAeFw0yNDEyMjgyMDIyMDBaFw0z
      NDEyMjYyMDIyMDBaMBgxFjAUBgNVBAMTDWt1YmVybmV0ZXMtY2EwggEiMA0GCSqG
      SIb3DQEBAQUAA4IBDwAwggEKAoIBAQDPaL1VY0adw3Ox8838VbkH3wkignPN596I
      bhOFJwz5LmmzVfBkmEPRXUHvRKnaxC3BkJOwT6SjqfcekYDSmQY+NXJQhNkhhjsJ
      n86jgFFSzV+CQiyFTXH0oy3f+jWnnUTr4mf313G5Mk7x2RVh23ccmPhVK84fxW9U
      iRTbn+92ot/gkzgoqYTtkQ1YMg3hXpJcX0b5ITnvHNlN6s6KNt8aYC/H6CrxAQdV
      67SeYK4drgz5xDwNC8cVDqO5Lp1o4Rp5N+lyULEU50HPsPk+b5x3c268ui7aicjo
      dDEN6wakthlm8Q3MflGquiJWX920qB27niu239FQTzX/3pWKpmEHAgMBAAGjQjBA
      MA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBReo6dT
      qoFVUOaWjtNGOk7DxXsTMjANBgkqhkiG9w0BAQsFAAOCAQEAVCcXhDBEEvAcskvG
      H+InSdocTzUl4FFUgvGfUFYfXrLpQAL52krnAktKqXx0AHwTe2Eh4vNmD48d96mi
      +sSPX5PEZN++NIoiBNJwKk4sSEqf+4jE7uPzeVwThfQZMJoG5z140/Zgp6cNrkgx
      hEKZ6+9PcY6uQ5SJ/BakzHF5y1QrV1Tg/Nn8HkzRjLnSACYiTd5LRMjH84lr/Jpc
      NmtOz5B8YfoQSvI0gIX0gxuqz1C9/WorvxDqZ+viSyu4e0GW+t0SgDg8pZJWxw8l
      bP52zPuDdxyUfndjW6fWGVlmPdS/opNCjvefT2cGNe1myPmoZqrJLTypS80igsDT
      0ot31g==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    annotations:
      kubernetes.io/description: Contains a CA bundle that can be used to verify the
        kube-apiserver when using internal endpoints such as the internal service
        IP or kubernetes.default.svc. No other usage is guaranteed across distributions
        of Kubernetes clusters.
    creationTimestamp: "2024-12-28T20:27:04Z"
    name: kube-root-ca.crt
    namespace: kube-system
    resourceVersion: "310"
    uid: b4c12f0a-a9ab-4d86-ad0c-fe995792e845
- apiVersion: v1
  data:
    cni-conf.json: |
      {
         "cniVersion":"0.3.0",
         "name":"mynet",
         "plugins":[
            {
               "name":"kubernetes",
               "type":"bridge",
               "bridge":"kube-bridge",
               "isDefaultGateway":true,
               "hairpinMode": true,
               "ipMasq": false,
               "ipam":{
                  "type":"host-local"
               }
            },
            {
              "type":"portmap",
              "capabilities":{
                 "snat":true,
                 "portMappings":true
              }
           }
         ]
      }
  kind: ConfigMap
  metadata:
    annotations:
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"v1","data":{"cni-conf.json":"{\n   \"cniVersion\":\"0.3.0\",\n   \"name\":\"mynet\",\n   \"plugins\":[\n      {\n         \"name\":\"kubernetes\",\n         \"type\":\"bridge\",\n         \"bridge\":\"kube-bridge\",\n         \"isDefaultGateway\":true,\n         \"hairpinMode\": true,\n         \"ipMasq\": false,\n         \"ipam\":{\n            \"type\":\"host-local\"\n         }\n      },\n      {\n        \"type\":\"portmap\",\n        \"capabilities\":{\n           \"snat\":true,\n           \"portMappings\":true\n        }\n     }\n   ]\n}\n"},"kind":"ConfigMap","metadata":{"labels":{"k8s-app":"kube-router","tier":"node"},"name":"kube-router-cfg","namespace":"kube-system"}}
      k0s.k0sproject.io/stack-checksum: bec18263118d901fd6c9e7698c07b09d
    creationTimestamp: "2024-12-28T20:27:00Z"
    labels:
      k0s.k0sproject.io/stack: kuberouter
#TBR:      k8s-app: kube-router
      tier: node
    name: kube-router-cfg
    namespace: kube-system
    resourceVersion: "251"
    uid: 25a5c5a3-5089-4ad5-8eed-37af33e45051
- apiVersion: v1
  data:
    apiServerAddresses: '["172.17.0.2:6443"]'
    konnectivity: '{"enabled":true,"agentPort":8132}'
    kubeletConfiguration: '{"kind":"KubeletConfiguration","apiVersion":"kubelet.config.k8s.io/v1beta1","syncFrequency":"0s","fileCheckFrequency":"0s","httpCheckFrequency":"0s","tlsCipherSuites":["TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256","TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384","TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256","TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256","TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384","TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"],"tlsMinVersion":"VersionTLS12","rotateCertificates":true,"serverTLSBootstrap":true,"authentication":{"x509":{},"webhook":{"cacheTTL":"0s"},"anonymous":{}},"authorization":{"webhook":{"cacheAuthorizedTTL":"0s","cacheUnauthorizedTTL":"0s"}},"eventRecordQPS":0,"clusterDomain":"cluster.local","clusterDNS":["10.96.0.10"],"streamingConnectionIdleTimeout":"0s","nodeStatusUpdateFrequency":"0s","nodeStatusReportFrequency":"0s","imageMinimumGCAge":"0s","imageMaximumGCAge":"0s","volumeStatsAggPeriod":"0s","cgroupsPerQOS":true,"cpuManagerReconcilePeriod":"0s","runtimeRequestTimeout":"0s","evictionPressureTransitionPeriod":"0s","failSwapOn":false,"memorySwap":{},"logging":{"flushFrequency":0,"verbosity":0,"options":{"text":{"infoBufferSize":"0"},"json":{"infoBufferSize":"0"}}},"shutdownGracePeriod":"0s","shutdownGracePeriodCriticalPods":"0s","containerRuntimeEndpoint":""}'
    nodeLocalLoadBalancing: '{"enabled":false,"type":"EnvoyProxy","envoyProxy":{"image":{"image":"quay.io/k0sproject/envoy-distroless","version":"v1.31.3"},"imagePullPolicy":"IfNotPresent","apiServerBindPort":7443,"konnectivityServerBindPort":7132}}'
    pauseImage: '{"image":"registry.k8s.io/pause","version":"3.9"}'
  kind: ConfigMap
  metadata:
    annotations:
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"v1","data":{"apiServerAddresses":"[\"172.17.0.2:6443\"]","konnectivity":"{\"enabled\":true,\"agentPort\":8132}","kubeletConfiguration":"{\"kind\":\"KubeletConfiguration\",\"apiVersion\":\"kubelet.config.k8s.io/v1beta1\",\"syncFrequency\":\"0s\",\"fileCheckFrequency\":\"0s\",\"httpCheckFrequency\":\"0s\",\"tlsCipherSuites\":[\"TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256\",\"TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\",\"TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256\",\"TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\",\"TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\",\"TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256\"],\"tlsMinVersion\":\"VersionTLS12\",\"rotateCertificates\":true,\"serverTLSBootstrap\":true,\"authentication\":{\"x509\":{},\"webhook\":{\"cacheTTL\":\"0s\"},\"anonymous\":{}},\"authorization\":{\"webhook\":{\"cacheAuthorizedTTL\":\"0s\",\"cacheUnauthorizedTTL\":\"0s\"}},\"eventRecordQPS\":0,\"clusterDomain\":\"cluster.local\",\"clusterDNS\":[\"10.96.0.10\"],\"streamingConnectionIdleTimeout\":\"0s\",\"nodeStatusUpdateFrequency\":\"0s\",\"nodeStatusReportFrequency\":\"0s\",\"imageMinimumGCAge\":\"0s\",\"imageMaximumGCAge\":\"0s\",\"volumeStatsAggPeriod\":\"0s\",\"cgroupsPerQOS\":true,\"cpuManagerReconcilePeriod\":\"0s\",\"runtimeRequestTimeout\":\"0s\",\"evictionPressureTransitionPeriod\":\"0s\",\"failSwapOn\":false,\"memorySwap\":{},\"logging\":{\"flushFrequency\":0,\"verbosity\":0,\"options\":{\"text\":{\"infoBufferSize\":\"0\"},\"json\":{\"infoBufferSize\":\"0\"}}},\"shutdownGracePeriod\":\"0s\",\"shutdownGracePeriodCriticalPods\":\"0s\",\"containerRuntimeEndpoint\":\"\"}","nodeLocalLoadBalancing":"{\"enabled\":false,\"type\":\"EnvoyProxy\",\"envoyProxy\":{\"image\":{\"image\":\"quay.io/k0sproject/envoy-distroless\",\"version\":\"v1.31.3\"},\"imagePullPolicy\":\"IfNotPresent\",\"apiServerBindPort\":7443,\"konnectivityServerBindPort\":7132}}","pauseImage":"{\"image\":\"registry.k8s.io/pause\",\"version\":\"3.9\"}"},"kind":"ConfigMap","metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"worker-config","app.kubernetes.io/managed-by":"k0s","app.kubernetes.io/name":"k0s","app.kubernetes.io/version":"v1.31.3-k0s.0","k0s.k0sproject.io/worker-profile":"default"},"name":"worker-config-default-1.31","namespace":"kube-system"}}
      k0s.k0sproject.io/stack-checksum: 87ee71b6be4251e16c3e38be23cf526e
    creationTimestamp: "2024-12-28T20:26:58Z"
    labels:
#TBR:      app.kubernetes.io/component: worker-config
      app.kubernetes.io/managed-by: k0s
      app.kubernetes.io/name: k0s
      app.kubernetes.io/version: v1.31.3-k0s.0
      k0s.k0sproject.io/stack: k0s-worker-config-1.31
      k0s.k0sproject.io/worker-profile: default
    name: worker-config-default-1.31
    namespace: kube-system
    resourceVersion: "215"
    uid: 5866c613-7cb6-46c9-9106-9424059cbf17
- apiVersion: v1
  data:
    apiServerAddresses: '["172.17.0.2:6443"]'
    konnectivity: '{"enabled":true,"agentPort":8132}'
    kubeletConfiguration: '{"kind":"KubeletConfiguration","apiVersion":"kubelet.config.k8s.io/v1beta1","syncFrequency":"0s","fileCheckFrequency":"0s","httpCheckFrequency":"0s","tlsCipherSuites":["TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256","TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384","TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256","TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256","TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384","TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"],"tlsMinVersion":"VersionTLS12","rotateCertificates":true,"serverTLSBootstrap":true,"authentication":{"x509":{},"webhook":{"cacheTTL":"0s"},"anonymous":{}},"authorization":{"webhook":{"cacheAuthorizedTTL":"0s","cacheUnauthorizedTTL":"0s"}},"eventRecordQPS":0,"clusterDomain":"cluster.local","clusterDNS":["10.96.0.10"],"streamingConnectionIdleTimeout":"0s","nodeStatusUpdateFrequency":"0s","nodeStatusReportFrequency":"0s","imageMinimumGCAge":"0s","imageMaximumGCAge":"0s","volumeStatsAggPeriod":"0s","cgroupsPerQOS":false,"cpuManagerReconcilePeriod":"0s","runtimeRequestTimeout":"0s","evictionPressureTransitionPeriod":"0s","failSwapOn":false,"memorySwap":{},"logging":{"flushFrequency":0,"verbosity":0,"options":{"text":{"infoBufferSize":"0"},"json":{"infoBufferSize":"0"}}},"shutdownGracePeriod":"0s","shutdownGracePeriodCriticalPods":"0s","containerRuntimeEndpoint":""}'
    nodeLocalLoadBalancing: '{"enabled":false,"type":"EnvoyProxy","envoyProxy":{"image":{"image":"quay.io/k0sproject/envoy-distroless","version":"v1.31.3"},"imagePullPolicy":"IfNotPresent","apiServerBindPort":7443,"konnectivityServerBindPort":7132}}'
    pauseImage: '{"image":"registry.k8s.io/pause","version":"3.9"}'
  kind: ConfigMap
  metadata:
    annotations:
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"v1","data":{"apiServerAddresses":"[\"172.17.0.2:6443\"]","konnectivity":"{\"enabled\":true,\"agentPort\":8132}","kubeletConfiguration":"{\"kind\":\"KubeletConfiguration\",\"apiVersion\":\"kubelet.config.k8s.io/v1beta1\",\"syncFrequency\":\"0s\",\"fileCheckFrequency\":\"0s\",\"httpCheckFrequency\":\"0s\",\"tlsCipherSuites\":[\"TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256\",\"TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\",\"TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256\",\"TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\",\"TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\",\"TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256\"],\"tlsMinVersion\":\"VersionTLS12\",\"rotateCertificates\":true,\"serverTLSBootstrap\":true,\"authentication\":{\"x509\":{},\"webhook\":{\"cacheTTL\":\"0s\"},\"anonymous\":{}},\"authorization\":{\"webhook\":{\"cacheAuthorizedTTL\":\"0s\",\"cacheUnauthorizedTTL\":\"0s\"}},\"eventRecordQPS\":0,\"clusterDomain\":\"cluster.local\",\"clusterDNS\":[\"10.96.0.10\"],\"streamingConnectionIdleTimeout\":\"0s\",\"nodeStatusUpdateFrequency\":\"0s\",\"nodeStatusReportFrequency\":\"0s\",\"imageMinimumGCAge\":\"0s\",\"imageMaximumGCAge\":\"0s\",\"volumeStatsAggPeriod\":\"0s\",\"cgroupsPerQOS\":false,\"cpuManagerReconcilePeriod\":\"0s\",\"runtimeRequestTimeout\":\"0s\",\"evictionPressureTransitionPeriod\":\"0s\",\"failSwapOn\":false,\"memorySwap\":{},\"logging\":{\"flushFrequency\":0,\"verbosity\":0,\"options\":{\"text\":{\"infoBufferSize\":\"0\"},\"json\":{\"infoBufferSize\":\"0\"}}},\"shutdownGracePeriod\":\"0s\",\"shutdownGracePeriodCriticalPods\":\"0s\",\"containerRuntimeEndpoint\":\"\"}","nodeLocalLoadBalancing":"{\"enabled\":false,\"type\":\"EnvoyProxy\",\"envoyProxy\":{\"image\":{\"image\":\"quay.io/k0sproject/envoy-distroless\",\"version\":\"v1.31.3\"},\"imagePullPolicy\":\"IfNotPresent\",\"apiServerBindPort\":7443,\"konnectivityServerBindPort\":7132}}","pauseImage":"{\"image\":\"registry.k8s.io/pause\",\"version\":\"3.9\"}"},"kind":"ConfigMap","metadata":{"creationTimestamp":null,"labels":{"app.kubernetes.io/component":"worker-config","app.kubernetes.io/managed-by":"k0s","app.kubernetes.io/name":"k0s","app.kubernetes.io/version":"v1.31.3-k0s.0","k0s.k0sproject.io/worker-profile":"default-windows"},"name":"worker-config-default-windows-1.31","namespace":"kube-system"}}
      k0s.k0sproject.io/stack-checksum: 244ec7b6f2d36c9640b30b44989046a8
    creationTimestamp: "2024-12-28T20:26:58Z"
    labels:
#TBR:      app.kubernetes.io/component: worker-config
      app.kubernetes.io/managed-by: k0s
      app.kubernetes.io/name: k0s
      app.kubernetes.io/version: v1.31.3-k0s.0
      k0s.k0sproject.io/stack: k0s-worker-config-1.31
      k0s.k0sproject.io/worker-profile: default-windows
    name: worker-config-default-windows-1.31
    namespace: kube-system
    resourceVersion: "216"
    uid: 94978427-e03b-4050-ae79-be57eeba38c1
- apiVersion: apps/v1
  kind: DaemonSet
  metadata:
    annotations:
      deprecated.daemonset.template.generation: "6"
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"DaemonSet","metadata":{"labels":{"k8s-app":"konnectivity-agent"},"name":"konnectivity-agent","namespace":"kube-system"},"spec":{"selector":{"matchLabels":{"k8s-app":"konnectivity-agent"}},"template":{"metadata":{"annotations":{"prometheus.io/port":"8093","prometheus.io/scrape":"true"},"labels":{"k8s-app":"konnectivity-agent"}},"spec":{"containers":[{"args":["--logtostderr=true","--ca-cert=/var/run/secrets/kubernetes.io/serviceaccount/ca.crt","--proxy-server-host=172.17.0.2","--proxy-server-port=8132","--service-account-token-path=/var/run/secrets/tokens/konnectivity-agent-token","--agent-identifiers=host=$(NODE_IP)","--agent-id=$(NODE_IP)"],"command":["/proxy-agent"],"env":[{"name":"K0S_CONTROLLER_COUNT","value":"1"},{"name":"NODE_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}}],"image":"quay.io/k0sproject/apiserver-network-proxy-agent:v0.30.3","imagePullPolicy":"IfNotPresent","livenessProbe":{"httpGet":{"path":"/healthz","port":8093},"initialDelaySeconds":15,"timeoutSeconds":15},"name":"konnectivity-agent","volumeMounts":[{"mountPath":"/var/run/secrets/tokens","name":"konnectivity-agent-token"}]}],"nodeSelector":{"kubernetes.io/os":"linux"},"priorityClassName":"system-cluster-critical","serviceAccountName":"konnectivity-agent","tolerations":[{"operator":"Exists"}],"volumes":[{"name":"konnectivity-agent-token","projected":{"sources":[{"serviceAccountToken":{"audience":"system:konnectivity-server","path":"konnectivity-agent-token"}}]}}]}}}}
      k0s.k0sproject.io/stack-checksum: bf190c54ead91505dd891365a8d94253
    creationTimestamp: "2024-12-28T20:27:00Z"
    generation: 6
    labels:
      k0s.k0sproject.io/stack: konnectivity
#TBR:      k8s-app: konnectivity-agent
    name: konnectivity-agent
    namespace: kube-system
    resourceVersion: "5795"
    uid: b4584f26-1e7a-42f4-9919-f5ad8f2827bc
  spec:
    revisionHistoryLimit: 10
    selector:
      matchLabels:
#TBR:        k8s-app: konnectivity-agent
# replaced by
        k0s.k0sproject.io/stack: konnectivity #ADDED
    template:
      metadata:
        annotations:
          prometheus.io/port: "8093"
          prometheus.io/scrape: "true"
        creationTimestamp: null
        labels:
#TBR:          k8s-app: konnectivity-agent
# replaced by
          k0s.k0sproject.io/stack: konnectivity #ADDED
      spec:
        containers:
        - args:
          - --logtostderr=true
          - --ca-cert=/var/run/secrets/kubernetes.io/serviceaccount/ca.crt
          - --proxy-server-host=172.17.0.2
          - --proxy-server-port=8132
          - --service-account-token-path=/var/run/secrets/tokens/konnectivity-agent-token
          - --agent-identifiers=host=$(NODE_IP)
          - --agent-id=$(NODE_IP)
          command:
          - /proxy-agent
          env:
          - name: K0S_CONTROLLER_COUNT
            value: "1"
          - name: NODE_IP
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: status.hostIP
          image: quay.io/k0sproject/apiserver-network-proxy-agent:v0.30.3
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /healthz
              port: 8093
              scheme: HTTP
            initialDelaySeconds: 15
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 15
          name: konnectivity-agent
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/run/secrets/tokens
            name: konnectivity-agent-token
        dnsPolicy: ClusterFirst
        nodeSelector:
          kubernetes.io/os: linux
        priorityClassName: system-cluster-critical
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: konnectivity-agent
        serviceAccountName: konnectivity-agent
        terminationGracePeriodSeconds: 30
        tolerations:
        - operator: Exists
        volumes:
        - name: konnectivity-agent-token
          projected:
            defaultMode: 420
            sources:
            - serviceAccountToken:
                audience: system:konnectivity-server
                expirationSeconds: 3600
                path: konnectivity-agent-token
    updateStrategy:
      rollingUpdate:
        maxSurge: 0
        maxUnavailable: 1
      type: RollingUpdate
  status:
    currentNumberScheduled: 1
    desiredNumberScheduled: 1
    numberAvailable: 1
    numberMisscheduled: 0
    numberReady: 1
    observedGeneration: 6
    updatedNumberScheduled: 1
- apiVersion: apps/v1
  kind: DaemonSet
  metadata:
    annotations:
      deprecated.daemonset.template.generation: "1"
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"DaemonSet","metadata":{"labels":{"k8s-app":"kube-proxy"},"name":"kube-proxy","namespace":"kube-system"},"spec":{"selector":{"matchLabels":{"k8s-app":"kube-proxy"}},"template":{"metadata":{"annotations":{"prometheus.io/port":"10249","prometheus.io/scrape":"true"},"labels":{"k8s-app":"kube-proxy"}},"spec":{"containers":[{"args":["--config=/var/lib/kube-proxy/config.conf","--hostname-override=$(NODE_NAME)"],"command":["/usr/local/bin/kube-proxy"],"env":[{"name":"NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}}],"image":"quay.io/k0sproject/kube-proxy:v1.31.3","imagePullPolicy":"IfNotPresent","name":"kube-proxy","securityContext":{"privileged":true},"volumeMounts":[{"mountPath":"/var/lib/kube-proxy","name":"kube-proxy"},{"mountPath":"/run/xtables.lock","name":"xtables-lock","readOnly":false},{"mountPath":"/lib/modules","name":"lib-modules","readOnly":true}]}],"hostNetwork":true,"nodeSelector":{"kubernetes.io/os":"linux"},"priorityClassName":"system-node-critical","serviceAccountName":"kube-proxy","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"operator":"Exists"},{"effect":"NoSchedule","key":"node-role.kubernetes.io/master","operator":"Exists"}],"volumes":[{"configMap":{"name":"kube-proxy"},"name":"kube-proxy"},{"hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"},"name":"xtables-lock"},{"hostPath":{"path":"/lib/modules"},"name":"lib-modules"}]}},"updateStrategy":{"type":"RollingUpdate"}}}
      k0s.k0sproject.io/stack-checksum: 8a88ec8325c0f11e765f6cd34f71146f
    creationTimestamp: "2024-12-28T20:27:06Z"
    generation: 1
    labels:
      k0s.k0sproject.io/stack: kubeproxy
#TBR:      k8s-app: kube-proxy
    name: kube-proxy
    namespace: kube-system
    resourceVersion: "513"
    uid: adf5cc0c-90d2-4a75-a3c5-fe2de7790873
  spec:
    revisionHistoryLimit: 10
    selector:
      matchLabels:
#TBR:        k8s-app: kube-proxy
# replaced by
        k0s.k0sproject.io/stack: kubeproxy
    template:
      metadata:
        annotations:
          prometheus.io/port: "10249"
          prometheus.io/scrape: "true"
        creationTimestamp: null
        labels:
#TBR:          k8s-app: kube-proxy
# replaced by
        k0s.k0sproject.io/stack: kubeproxy
      spec:
        containers:
        - args:
          - --config=/var/lib/kube-proxy/config.conf
          - --hostname-override=$(NODE_NAME)
          command:
          - /usr/local/bin/kube-proxy
          env:
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          image: quay.io/k0sproject/kube-proxy:v1.31.3
          imagePullPolicy: IfNotPresent
          name: kube-proxy
          resources: {}
          securityContext:
            privileged: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/lib/kube-proxy
            name: kube-proxy
          - mountPath: /run/xtables.lock
            name: xtables-lock
          - mountPath: /lib/modules
            name: lib-modules
            readOnly: true
        dnsPolicy: ClusterFirst
        hostNetwork: true
        nodeSelector:
          kubernetes.io/os: linux
        priorityClassName: system-node-critical
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: kube-proxy
        serviceAccountName: kube-proxy
        terminationGracePeriodSeconds: 30
        tolerations:
        - key: CriticalAddonsOnly
          operator: Exists
        - operator: Exists
        - effect: NoSchedule
          key: node-role.kubernetes.io/master
          operator: Exists
        volumes:
        - configMap:
            defaultMode: 420
            name: kube-proxy
          name: kube-proxy
        - hostPath:
            path: /run/xtables.lock
            type: FileOrCreate
          name: xtables-lock
        - hostPath:
            path: /lib/modules
            type: ""
          name: lib-modules
    updateStrategy:
      rollingUpdate:
        maxSurge: 0
        maxUnavailable: 1
      type: RollingUpdate
  status:
    currentNumberScheduled: 1
    desiredNumberScheduled: 1
    numberAvailable: 1
    numberMisscheduled: 0
    numberReady: 1
    observedGeneration: 1
    updatedNumberScheduled: 1
- apiVersion: apps/v1
  kind: DaemonSet
  metadata:
    annotations:
      deprecated.daemonset.template.generation: "1"
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"DaemonSet","metadata":{"labels":{"k8s-app":"kube-router","tier":"node"},"name":"kube-router","namespace":"kube-system"},"spec":{"selector":{"matchLabels":{"k8s-app":"kube-router","tier":"node"}},"template":{"metadata":{"annotations":{"prometheus.io/port":"8080","prometheus.io/scrape":"true"},"labels":{"k8s-app":"kube-router","tier":"node"}},"spec":{"containers":[{"args":["--run-service-proxy=false","--enable-ipv6=false","--metrics-port=8080","--run-router=true","--run-firewall=true","--bgp-graceful-restart=true","--enable-ipv4=true","--auto-mtu=true","--hairpin-mode=true"],"env":[{"name":"NODE_NAME","valueFrom":{"fieldRef":{"fieldPath":"spec.nodeName"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"KUBE_ROUTER_CNI_CONF_FILE","value":"/etc/cni/net.d/10-kuberouter.conflist"}],"image":"quay.io/k0sproject/kube-router:v2.2.1-iptables1.8.9-1","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":6,"httpGet":{"path":"/healthz","port":"healthz"},"initialDelaySeconds":300,"periodSeconds":10,"timeoutSeconds":10},"name":"kube-router","ports":[{"containerPort":20244,"name":"healthz"}],"readinessProbe":{"failureThreshold":3,"httpGet":{"path":"/healthz","port":"healthz"},"periodSeconds":3,"successThreshold":3,"timeoutSeconds":3},"resources":{"requests":{"cpu":"250m","memory":"16Mi"}},"securityContext":{"privileged":true},"volumeMounts":[{"mountPath":"/lib/modules","name":"lib-modules","readOnly":true},{"mountPath":"/etc/cni/net.d","name":"cni-conf-dir"},{"mountPath":"/run/xtables.lock","name":"xtables-lock","readOnly":false}]}],"hostNetwork":true,"hostPID":true,"initContainers":[{"args":["install"],"image":"quay.io/k0sproject/cni-node:1.3.0-k0s.0","imagePullPolicy":"IfNotPresent","name":"install-cni-bins","volumeMounts":[{"mountPath":"/host/opt/cni/bin","name":"cni-bin"}]},{"command":["/bin/sh","-c","set -e -x; if [ ! -f /etc/cni/net.d/10-kuberouter.conflist ]; then if [ -f /etc/cni/net.d/*.conf ]; then rm -f /etc/cni/net.d/*.conf; fi; TMP=/etc/cni/net.d/.tmp-kuberouter-cfg; cp /etc/kube-router/cni-conf.json ${TMP}; mv ${TMP} /etc/cni/net.d/10-kuberouter.conflist; fi"],"image":"quay.io/k0sproject/kube-router:v2.2.1-iptables1.8.9-1","imagePullPolicy":"IfNotPresent","name":"install-cniconf","volumeMounts":[{"mountPath":"/etc/cni/net.d","name":"cni-conf-dir"},{"mountPath":"/etc/kube-router","name":"kube-router-cfg"}]}],"priorityClassName":"system-node-critical","serviceAccountName":"kube-router","tolerations":[{"effect":"NoSchedule","operator":"Exists"},{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoExecute","operator":"Exists"},{"effect":"NoSchedule","key":"node-role.kubernetes.io/master","operator":"Exists"}],"volumes":[{"hostPath":{"path":"/lib/modules"},"name":"lib-modules"},{"hostPath":{"path":"/etc/cni/net.d"},"name":"cni-conf-dir"},{"hostPath":{"path":"/opt/cni/bin","type":"DirectoryOrCreate"},"name":"cni-bin"},{"configMap":{"name":"kube-router-cfg"},"name":"kube-router-cfg"},{"hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"},"name":"xtables-lock"}]}}}}
      k0s.k0sproject.io/stack-checksum: 7199b4a5fb3e7e86f9ce7214f10d864f
    creationTimestamp: "2024-12-28T20:27:01Z"
    generation: 1
    labels:
      k0s.k0sproject.io/stack: kuberouter
#TBR:          k8s-app: kube-router
      tier: node
    name: kube-router
    namespace: kube-system
    resourceVersion: "585"
    uid: 7d7cbbc3-184a-482b-af8b-97835597d8c8
  spec:
    revisionHistoryLimit: 10
    selector:
      matchLabels:
#TBR:        k8s-app: kube-router
# replaced by
        k0s.k0sproject.io/stack: kuberouter
        tier: node
    template:
      metadata:
        annotations:
          prometheus.io/port: "8080"
          prometheus.io/scrape: "true"
        creationTimestamp: null
        labels:
#TBR:          k8s-app: kube-router
# replaced by
          k0s.k0sproject.io/stack: kuberouter
          tier: node
      spec:
        containers:
        - args:
          - --run-service-proxy=false
          - --enable-ipv6=false
          - --metrics-port=8080
          - --run-router=true
          - --run-firewall=true
          - --bgp-graceful-restart=true
          - --enable-ipv4=true
          - --auto-mtu=true
          - --hairpin-mode=true
          env:
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          - name: POD_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: KUBE_ROUTER_CNI_CONF_FILE
            value: /etc/cni/net.d/10-kuberouter.conflist
          image: quay.io/k0sproject/kube-router:v2.2.1-iptables1.8.9-1
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 6
            httpGet:
              path: /healthz
              port: healthz
              scheme: HTTP
            initialDelaySeconds: 300
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 10
          name: kube-router
          ports:
          - containerPort: 20244
            name: healthz
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /healthz
              port: healthz
              scheme: HTTP
            periodSeconds: 3
            successThreshold: 3
            timeoutSeconds: 3
          resources:
            requests:
              cpu: 250m
              memory: 16Mi
          securityContext:
            privileged: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /lib/modules
            name: lib-modules
            readOnly: true
          - mountPath: /etc/cni/net.d
            name: cni-conf-dir
          - mountPath: /run/xtables.lock
            name: xtables-lock
        dnsPolicy: ClusterFirst
        hostNetwork: true
        hostPID: true
        initContainers:
        - args:
          - install
          image: quay.io/k0sproject/cni-node:1.3.0-k0s.0
          imagePullPolicy: IfNotPresent
          name: install-cni-bins
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /host/opt/cni/bin
            name: cni-bin
        - command:
          - /bin/sh
          - -c
          - set -e -x; if [ ! -f /etc/cni/net.d/10-kuberouter.conflist ]; then if
            [ -f /etc/cni/net.d/*.conf ]; then rm -f /etc/cni/net.d/*.conf; fi; TMP=/etc/cni/net.d/.tmp-kuberouter-cfg;
            cp /etc/kube-router/cni-conf.json ${TMP}; mv ${TMP} /etc/cni/net.d/10-kuberouter.conflist;
            fi
          image: quay.io/k0sproject/kube-router:v2.2.1-iptables1.8.9-1
          imagePullPolicy: IfNotPresent
          name: install-cniconf
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /etc/cni/net.d
            name: cni-conf-dir
          - mountPath: /etc/kube-router
            name: kube-router-cfg
        priorityClassName: system-node-critical
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: kube-router
        serviceAccountName: kube-router
        terminationGracePeriodSeconds: 30
        tolerations:
        - effect: NoSchedule
          operator: Exists
        - key: CriticalAddonsOnly
          operator: Exists
        - effect: NoExecute
          operator: Exists
        - effect: NoSchedule
          key: node-role.kubernetes.io/master
          operator: Exists
        volumes:
        - hostPath:
            path: /lib/modules
            type: ""
          name: lib-modules
        - hostPath:
            path: /etc/cni/net.d
            type: ""
          name: cni-conf-dir
        - hostPath:
            path: /opt/cni/bin
            type: DirectoryOrCreate
          name: cni-bin
        - configMap:
            defaultMode: 420
            name: kube-router-cfg
          name: kube-router-cfg
        - hostPath:
            path: /run/xtables.lock
            type: FileOrCreate
          name: xtables-lock
    updateStrategy:
      rollingUpdate:
        maxSurge: 0
        maxUnavailable: 1
      type: RollingUpdate
  status:
    currentNumberScheduled: 1
    desiredNumberScheduled: 1
    numberAvailable: 1
    numberMisscheduled: 0
    numberReady: 1
    observedGeneration: 1
    updatedNumberScheduled: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"labels":{"k8s-app":"kube-dns","kubernetes.io/name":"CoreDNS"},"name":"coredns","namespace":"kube-system"},"spec":{"replicas":1,"selector":{"matchLabels":{"k8s-app":"kube-dns"}},"strategy":{"type":"RollingUpdate"},"template":{"metadata":{"annotations":{"prometheus.io/port":"9153","prometheus.io/scrape":"true"},"labels":{"k8s-app":"kube-dns"}},"spec":{"containers":[{"args":["-conf","/etc/coredns/Corefile"],"image":"quay.io/k0sproject/coredns:1.11.4","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/health","port":8080,"scheme":"HTTP"},"initialDelaySeconds":60,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":1},"name":"coredns","ports":[{"containerPort":53,"name":"dns","protocol":"UDP"},{"containerPort":53,"name":"dns-tcp","protocol":"TCP"},{"containerPort":9153,"name":"metrics","protocol":"TCP"}],"readinessProbe":{"failureThreshold":3,"httpGet":{"path":"/ready","port":8181,"scheme":"HTTP"},"initialDelaySeconds":30,"periodSeconds":2,"successThreshold":1,"timeoutSeconds":1},"resources":{"limits":{"memory":"170Mi"},"requests":{"cpu":"100m","memory":"70Mi"}},"securityContext":{"allowPrivilegeEscalation":false,"capabilities":{"add":["NET_BIND_SERVICE"],"drop":["all"]},"readOnlyRootFilesystem":true},"volumeMounts":[{"mountPath":"/etc/coredns","name":"config-volume","readOnly":true}]}],"dnsPolicy":"Default","nodeSelector":{"kubernetes.io/os":"linux"},"serviceAccountName":"coredns","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoSchedule","key":"node-role.kubernetes.io/master","operator":"Exists"}],"volumes":[{"configMap":{"items":[{"key":"Corefile","path":"Corefile"}],"name":"coredns"},"name":"config-volume"}]}}}}
      k0s.k0sproject.io/stack-checksum: 8426081788c93707a4c6d649ae61251b
    creationTimestamp: "2024-12-28T20:27:02Z"
    generation: 1
    labels:
      k0s.k0sproject.io/stack: coredns
#TBR:      k8s-app: kube-dns
      kubernetes.io/name: coredns
    name: coredns
    namespace: kube-system
    resourceVersion: "687"
    uid: 968da5dd-8b7f-4e7a-ad84-d2bc6a82ada9
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
#TBR:        k8s-app: kube-dns
# replaced by
      k0s.k0sproject.io/stack: coredns
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          prometheus.io/port: "9153"
          prometheus.io/scrape: "true"
        creationTimestamp: null
        labels:
#TBR:          k8s-app: kube-dns
# replaced by
          k0s.k0sproject.io/stack: coredns
      spec:
        containers:
        - args:
          - -conf
          - /etc/coredns/Corefile
          image: quay.io/k0sproject/coredns:1.11.4
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 60
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: coredns
          ports:
          - containerPort: 53
            name: dns
            protocol: UDP
          - containerPort: 53
            name: dns-tcp
            protocol: TCP
          - containerPort: 9153
            name: metrics
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /ready
              port: 8181
              scheme: HTTP
            initialDelaySeconds: 30
            periodSeconds: 2
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              memory: 170Mi
            requests:
              cpu: 100m
              memory: 70Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              add:
              - NET_BIND_SERVICE
              drop:
              - all
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /etc/coredns
            name: config-volume
            readOnly: true
        dnsPolicy: Default
        nodeSelector:
          kubernetes.io/os: linux
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: coredns
        serviceAccountName: coredns
        terminationGracePeriodSeconds: 30
        tolerations:
        - key: CriticalAddonsOnly
          operator: Exists
        - effect: NoSchedule
          key: node-role.kubernetes.io/master
          operator: Exists
        volumes:
        - configMap:
            defaultMode: 420
            items:
            - key: Corefile
              path: Corefile
            name: coredns
          name: config-volume
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2024-12-28T20:28:26Z"
      lastUpdateTime: "2024-12-28T20:28:26Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    - lastTransitionTime: "2024-12-28T20:27:04Z"
      lastUpdateTime: "2024-12-28T20:28:26Z"
      message: ReplicaSet "coredns-7b7b486b6c" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"labels":{"k8s-app":"metrics-server"},"name":"metrics-server","namespace":"kube-system"},"spec":{"replicas":1,"selector":{"matchLabels":{"k8s-app":"metrics-server"}},"strategy":{"rollingUpdate":{"maxUnavailable":0}},"template":{"metadata":{"labels":{"k8s-app":"metrics-server"}},"spec":{"containers":[{"args":["--cert-dir=/tmp","--secure-port=10250","--kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname","--kubelet-use-node-status-port","--metric-resolution=15s"],"image":"registry.k8s.io/metrics-server/metrics-server:v0.7.2","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/livez","port":"https","scheme":"HTTPS"},"periodSeconds":10},"name":"metrics-server","ports":[{"containerPort":10250,"name":"https","protocol":"TCP"}],"readinessProbe":{"failureThreshold":3,"httpGet":{"path":"/readyz","port":"https","scheme":"HTTPS"},"initialDelaySeconds":20,"periodSeconds":10},"resources":{"requests":{"cpu":"10m","memory":"30M"}},"securityContext":{"readOnlyRootFilesystem":true,"runAsNonRoot":true,"runAsUser":1000},"volumeMounts":[{"mountPath":"/tmp","name":"tmp-dir"}]}],"nodeSelector":{"kubernetes.io/os":"linux"},"priorityClassName":"system-cluster-critical","serviceAccountName":"metrics-server","tolerations":[{"effect":"NoSchedule","key":"node-role.kubernetes.io/master","operator":"Exists"}],"volumes":[{"emptyDir":{},"name":"tmp-dir"}]}}}}
      k0s.k0sproject.io/stack-checksum: 14b88ca96a7da114865a03d3b0063bbc
    creationTimestamp: "2024-12-28T20:27:11Z"
    generation: 1
    labels:
      k0s.k0sproject.io/stack: metricserver
#TBR:      k8s-app: metrics-server
    name: metrics-server
    namespace: kube-system
    resourceVersion: "691"
    uid: 948e7e3d-39a0-4ee5-8ecb-ee3e35f2d8a4
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
#TBR:        k8s-app: metrics-server
# replaced by
        k0s.k0sproject.io/stack: metricserver
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 0
      type: RollingUpdate
    template:
      metadata:
        creationTimestamp: null
        labels:
#TBR:          k8s-app: metrics-server
# replaced by
          k0s.k0sproject.io/stack: metricserver
      spec:
        containers:
        - args:
          - --cert-dir=/tmp
          - --secure-port=10250
          - --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname
          - --kubelet-use-node-status-port
          - --metric-resolution=15s
          image: registry.k8s.io/metrics-server/metrics-server:v0.7.2
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /livez
              port: https
              scheme: HTTPS
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: metrics-server
          ports:
          - containerPort: 10250
            name: https
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /readyz
              port: https
              scheme: HTTPS
            initialDelaySeconds: 20
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            requests:
              cpu: 10m
              memory: 30M
          securityContext:
            readOnlyRootFilesystem: true
            runAsNonRoot: true
            runAsUser: 1000
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp
            name: tmp-dir
        dnsPolicy: ClusterFirst
        nodeSelector:
          kubernetes.io/os: linux
        priorityClassName: system-cluster-critical
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: metrics-server
        serviceAccountName: metrics-server
        terminationGracePeriodSeconds: 30
        tolerations:
        - effect: NoSchedule
          key: node-role.kubernetes.io/master
          operator: Exists
        volumes:
        - emptyDir: {}
          name: tmp-dir
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2024-12-28T20:28:26Z"
      lastUpdateTime: "2024-12-28T20:28:26Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    - lastTransitionTime: "2024-12-28T20:27:11Z"
      lastUpdateTime: "2024-12-28T20:28:26Z"
      message: ReplicaSet "metrics-server-78c4ccbc7f" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: v1
  kind: Node
  metadata:
    annotations:
      node.alpha.kubernetes.io/ttl: "0"
      volumes.kubernetes.io/controller-managed-attach-detach: "true"
    creationTimestamp: "2024-12-28T20:27:05Z"
    labels:
      beta.kubernetes.io/arch: amd64
      beta.kubernetes.io/os: linux
      kubernetes.io/arch: amd64
      kubernetes.io/hostname: k0s
      kubernetes.io/os: linux
      node-role.kubernetes.io/control-plane: "true"
      node.k0sproject.io/role: control-plane
    name: k0s
    resourceVersion: "13501"
    uid: d82c14ef-9e65-4644-a84d-392c41e4ba71
  spec:
    podCIDR: 10.244.0.0/24
    podCIDRs:
    - 10.244.0.0/24
    taints:
    - effect: NoSchedule
      key: node-role.kubernetes.io/master
  status:
    addresses:
    - address: 172.17.0.2
      type: InternalIP
    - address: k0s
      type: Hostname
    allocatable:
      cpu: "8"
      ephemeral-storage: "121269705323"
      hugepages-1Gi: "0"
      hugepages-2Mi: "0"
      memory: 32783752Ki
      pods: "110"
    capacity:
      cpu: "8"
      ephemeral-storage: 131586052Ki
      hugepages-1Gi: "0"
      hugepages-2Mi: "0"
      memory: 32886152Ki
      pods: "110"
    conditions:
    - lastHeartbeatTime: "2024-12-28T22:49:42Z"
      lastTransitionTime: "2024-12-28T20:27:05Z"
      message: kubelet has sufficient memory available
      reason: KubeletHasSufficientMemory
      status: "False"
      type: MemoryPressure
    - lastHeartbeatTime: "2024-12-28T22:49:42Z"
      lastTransitionTime: "2024-12-28T20:27:05Z"
      message: kubelet has no disk pressure
      reason: KubeletHasNoDiskPressure
      status: "False"
      type: DiskPressure
    - lastHeartbeatTime: "2024-12-28T22:49:42Z"
      lastTransitionTime: "2024-12-28T20:27:05Z"
      message: kubelet has sufficient PID available
      reason: KubeletHasSufficientPID
      status: "False"
      type: PIDPressure
    - lastHeartbeatTime: "2024-12-28T22:49:42Z"
      lastTransitionTime: "2024-12-28T21:48:31Z"
      message: kubelet is posting ready status
      reason: KubeletReady
      status: "True"
      type: Ready
    daemonEndpoints:
      kubeletEndpoint:
        Port: 10250
    images:
    - names:
      - quay.io/k0sproject/kube-router@sha256:7d123cda213edf7e0f02795d58dcdb75f4ebee0122c62b2f50b4f7d2cef85450
      - quay.io/k0sproject/kube-router:v2.2.1-iptables1.8.9-1
      sizeBytes: 35474846
    - names:
      - quay.io/k0sproject/cni-node@sha256:f9ae72f1be998ba3d0a9298d35cbd5577758cc08326406c63fb4804b0664391a
      - quay.io/k0sproject/cni-node:1.3.0-k0s.0
      sizeBytes: 26155832
    - names:
      - quay.io/k0sproject/kube-proxy@sha256:fb739c4ea6dea8914b0997b8d7c7fe95450806762b4113f741220516454228e7
      - quay.io/k0sproject/kube-proxy:v1.31.3
      sizeBytes: 24680510
    - names:
      - quay.io/k0sproject/coredns@sha256:396960d5f168eecc33d5c4b02b4526a9f71ed04ddb678113fcb3a57062c98379
      - quay.io/k0sproject/coredns:1.11.4
      sizeBytes: 20201260
    - names:
      - registry.k8s.io/metrics-server/metrics-server@sha256:ffcb2bf004d6aa0a17d90e0247cf94f2865c8901dcab4427034c341951c239f9
      - registry.k8s.io/metrics-server/metrics-server:v0.7.2
      sizeBytes: 19494617
    - names:
      - quay.io/k0sproject/apiserver-network-proxy-agent@sha256:6723baf0bf62f76e85bc9120a056d0efb67b4f9dc041acbf5e74ead4b4f5f775
      - quay.io/k0sproject/apiserver-network-proxy-agent:v0.30.3
      sizeBytes: 10599607
    - names:
      - registry.k8s.io/pause@sha256:7031c1b283388d2c2e09b57badb803c05ebed362dc88d84b480cc47f72a21097
      - registry.k8s.io/pause:3.9
      sizeBytes: 321520
    nodeInfo:
      architecture: amd64
      bootID: 229ac743-7f36-43fc-bd0f-32f42e884c03
      containerRuntimeVersion: containerd://1.7.24
      kernelVersion: 5.10.104-linuxkit
      kubeProxyVersion: v1.31.3+k0s
      kubeletVersion: v1.31.3+k0s
      machineID: ""
      operatingSystem: linux
      osImage: Alpine Linux v3.20
      systemUUID: 78e04541-0000-0000-b6fc-dfe1616737b7
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      prometheus.io/port: "9153"
      prometheus.io/scrape: "true"
    creationTimestamp: "2024-12-28T20:27:04Z"
    generateName: coredns-7b7b486b6c-
    labels:
#TBR:      k8s-app: kube-dns
# replaced by
      k0s.k0sproject.io/stack: coredns
      pod-template-hash: 7b7b486b6c
    name: coredns-7b7b486b6c-4xgcj
    namespace: kube-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: coredns-7b7b486b6c
      uid: 25873427-86bb-4d88-a7d1-d0e0edbc5751
    resourceVersion: "682"
    uid: 47caa6c2-6408-4420-8522-57a100e7a773
  spec:
    containers:
    - args:
      - -conf
      - /etc/coredns/Corefile
      image: quay.io/k0sproject/coredns:1.11.4
      imagePullPolicy: IfNotPresent
      livenessProbe:
        failureThreshold: 3
        httpGet:
          path: /health
          port: 8080
          scheme: HTTP
        initialDelaySeconds: 60
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      name: coredns
      ports:
      - containerPort: 53
        name: dns
        protocol: UDP
      - containerPort: 53
        name: dns-tcp
        protocol: TCP
      - containerPort: 9153
        name: metrics
        protocol: TCP
      readinessProbe:
        failureThreshold: 3
        httpGet:
          path: /ready
          port: 8181
          scheme: HTTP
        initialDelaySeconds: 30
        periodSeconds: 2
        successThreshold: 1
        timeoutSeconds: 1
      resources:
        limits:
          memory: 170Mi
        requests:
          cpu: 100m
          memory: 70Mi
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          add:
          - NET_BIND_SERVICE
          drop:
          - all
        readOnlyRootFilesystem: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /etc/coredns
        name: config-volume
        readOnly: true
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-z8x5j
        readOnly: true
    dnsPolicy: Default
    enableServiceLinks: true
    nodeName: k0s
    nodeSelector:
      kubernetes.io/os: linux
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: coredns
    serviceAccountName: coredns
    terminationGracePeriodSeconds: 30
    tolerations:
    - key: CriticalAddonsOnly
      operator: Exists
    - effect: NoSchedule
      key: node-role.kubernetes.io/master
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - configMap:
        defaultMode: 420
        items:
        - key: Corefile
          path: Corefile
        name: coredns
      name: config-volume
    - name: kube-api-access-z8x5j
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:27:57Z"
      status: "True"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:27:46Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:28:26Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:28:26Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:27:46Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://6136e096c86d07be58289d1b44de68c5ec7f9a0af66de52b30bab1199e39ceb4
      image: quay.io/k0sproject/coredns:1.11.4
      imageID: quay.io/k0sproject/coredns@sha256:396960d5f168eecc33d5c4b02b4526a9f71ed04ddb678113fcb3a57062c98379
      lastState: {}
      name: coredns
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2024-12-28T20:27:56Z"
      volumeMounts:
      - mountPath: /etc/coredns
        name: config-volume
        readOnly: true
        recursiveReadOnly: Disabled
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-z8x5j
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 172.17.0.2
    hostIPs:
    - ip: 172.17.0.2
    phase: Running
    podIP: 10.244.0.3
    podIPs:
    - ip: 10.244.0.3
    qosClass: Burstable
    startTime: "2024-12-28T20:27:46Z"
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      prometheus.io/port: "8093"
      prometheus.io/scrape: "true"
    creationTimestamp: "2024-12-28T21:48:33Z"
    generateName: konnectivity-agent-
    labels:
      controller-revision-hash: 66b785ddc9
#TBR:      k8s-app: konnectivity-agent
# replaced by
      k0s.k0sproject.io/stack: konnectivity
      pod-template-generation: "6"
    name: konnectivity-agent-9xfdm
    namespace: kube-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: DaemonSet
      name: konnectivity-agent
      uid: b4584f26-1e7a-42f4-9919-f5ad8f2827bc
    resourceVersion: "5794"
    uid: 910aa192-5564-4773-be62-e646fbafbbf9
  spec:
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchFields:
            - key: metadata.name
              operator: In
              values:
              - k0s
    containers:
    - args:
      - --logtostderr=true
      - --ca-cert=/var/run/secrets/kubernetes.io/serviceaccount/ca.crt
      - --proxy-server-host=172.17.0.2
      - --proxy-server-port=8132
      - --service-account-token-path=/var/run/secrets/tokens/konnectivity-agent-token
      - --agent-identifiers=host=$(NODE_IP)
      - --agent-id=$(NODE_IP)
      command:
      - /proxy-agent
      env:
      - name: K0S_CONTROLLER_COUNT
        value: "1"
      - name: NODE_IP
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: status.hostIP
      image: quay.io/k0sproject/apiserver-network-proxy-agent:v0.30.3
      imagePullPolicy: IfNotPresent
      livenessProbe:
        failureThreshold: 3
        httpGet:
          path: /healthz
          port: 8093
          scheme: HTTP
        initialDelaySeconds: 15
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 15
      name: konnectivity-agent
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/run/secrets/tokens
        name: konnectivity-agent-token
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-bqwj6
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: k0s
    nodeSelector:
      kubernetes.io/os: linux
    preemptionPolicy: PreemptLowerPriority
    priority: 2000000000
    priorityClassName: system-cluster-critical
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: konnectivity-agent
    serviceAccountName: konnectivity-agent
    terminationGracePeriodSeconds: 30
    tolerations:
    - operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/disk-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/memory-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/pid-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/unschedulable
      operator: Exists
    volumes:
    - name: konnectivity-agent-token
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            audience: system:konnectivity-server
            expirationSeconds: 3600
            path: konnectivity-agent-token
    - name: kube-api-access-bqwj6
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T21:48:35Z"
      status: "True"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T21:48:33Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T21:48:35Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T21:48:35Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T21:48:33Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://5f19a65df63bab316e060687accc5a0a07d40664b27fa6289a18dc66a1c01e3f
      image: quay.io/k0sproject/apiserver-network-proxy-agent:v0.30.3
      imageID: quay.io/k0sproject/apiserver-network-proxy-agent@sha256:6723baf0bf62f76e85bc9120a056d0efb67b4f9dc041acbf5e74ead4b4f5f775
      lastState: {}
      name: konnectivity-agent
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2024-12-28T21:48:34Z"
      volumeMounts:
      - mountPath: /var/run/secrets/tokens
        name: konnectivity-agent-token
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-bqwj6
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 172.17.0.2
    hostIPs:
    - ip: 172.17.0.2
    phase: Running
    podIP: 10.244.0.8
    podIPs:
    - ip: 10.244.0.8
    qosClass: BestEffort
    startTime: "2024-12-28T21:48:33Z"
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      prometheus.io/port: "10249"
      prometheus.io/scrape: "true"
    creationTimestamp: "2024-12-28T20:27:06Z"
    generateName: kube-proxy-
    labels:
      controller-revision-hash: 59ddcf567d
#TBR:      k8s-app: kube-proxy
# replaced by
      k0s.k0sproject.io/stack: kubeproxy
      pod-template-generation: "1"
    name: kube-proxy-6bvz7
    namespace: kube-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: DaemonSet
      name: kube-proxy
      uid: adf5cc0c-90d2-4a75-a3c5-fe2de7790873
    resourceVersion: "512"
    uid: 9e42a1d3-4308-49f5-b965-a12fd0d24ba1
  spec:
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchFields:
            - key: metadata.name
              operator: In
              values:
              - k0s
    containers:
    - args:
      - --config=/var/lib/kube-proxy/config.conf
      - --hostname-override=$(NODE_NAME)
      command:
      - /usr/local/bin/kube-proxy
      env:
      - name: NODE_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: spec.nodeName
      image: quay.io/k0sproject/kube-proxy:v1.31.3
      imagePullPolicy: IfNotPresent
      name: kube-proxy
      resources: {}
      securityContext:
        privileged: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/lib/kube-proxy
        name: kube-proxy
      - mountPath: /run/xtables.lock
        name: xtables-lock
      - mountPath: /lib/modules
        name: lib-modules
        readOnly: true
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-j799m
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    hostNetwork: true
    nodeName: k0s
    nodeSelector:
      kubernetes.io/os: linux
    preemptionPolicy: PreemptLowerPriority
    priority: 2000001000
    priorityClassName: system-node-critical
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: kube-proxy
    serviceAccountName: kube-proxy
    terminationGracePeriodSeconds: 30
    tolerations:
    - key: CriticalAddonsOnly
      operator: Exists
    - operator: Exists
    - effect: NoSchedule
      key: node-role.kubernetes.io/master
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/disk-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/memory-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/pid-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/unschedulable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/network-unavailable
      operator: Exists
    volumes:
    - configMap:
        defaultMode: 420
        name: kube-proxy
      name: kube-proxy
    - hostPath:
        path: /run/xtables.lock
        type: FileOrCreate
      name: xtables-lock
    - hostPath:
        path: /lib/modules
        type: ""
      name: lib-modules
    - name: kube-api-access-j799m
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:27:33Z"
      status: "True"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:27:06Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:27:33Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:27:33Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:27:06Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://47e46a41f0c704b71ccd9aacd2931ffe69e7b8836e621bc3adb0bafee3e439bf
      image: quay.io/k0sproject/kube-proxy:v1.31.3
      imageID: quay.io/k0sproject/kube-proxy@sha256:fb739c4ea6dea8914b0997b8d7c7fe95450806762b4113f741220516454228e7
      lastState: {}
      name: kube-proxy
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2024-12-28T20:27:32Z"
      volumeMounts:
      - mountPath: /var/lib/kube-proxy
        name: kube-proxy
      - mountPath: /run/xtables.lock
        name: xtables-lock
      - mountPath: /lib/modules
        name: lib-modules
        readOnly: true
        recursiveReadOnly: Disabled
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-j799m
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 172.17.0.2
    hostIPs:
    - ip: 172.17.0.2
    phase: Running
    podIP: 172.17.0.2
    podIPs:
    - ip: 172.17.0.2
    qosClass: BestEffort
    startTime: "2024-12-28T20:27:06Z"
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      prometheus.io/port: "8080"
      prometheus.io/scrape: "true"
    creationTimestamp: "2024-12-28T20:27:05Z"
    generateName: kube-router-
    labels:
      controller-revision-hash: 576cd5674b
#TBR:      k8s-app: kube-router
# replaced by
      k0s.k0sproject.io/stack: kuberouter
      pod-template-generation: "1"
      tier: node
    name: kube-router-x4rsw
    namespace: kube-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: DaemonSet
      name: kube-router
      uid: 7d7cbbc3-184a-482b-af8b-97835597d8c8
    resourceVersion: "584"
    uid: 31c2fc68-4c68-4014-b427-7cfd55715ab3
  spec:
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
          - matchFields:
            - key: metadata.name
              operator: In
              values:
              - k0s
    containers:
    - args:
      - --run-service-proxy=false
      - --enable-ipv6=false
      - --metrics-port=8080
      - --run-router=true
      - --run-firewall=true
      - --bgp-graceful-restart=true
      - --enable-ipv4=true
      - --auto-mtu=true
      - --hairpin-mode=true
      env:
      - name: NODE_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: spec.nodeName
      - name: POD_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      - name: KUBE_ROUTER_CNI_CONF_FILE
        value: /etc/cni/net.d/10-kuberouter.conflist
      image: quay.io/k0sproject/kube-router:v2.2.1-iptables1.8.9-1
      imagePullPolicy: IfNotPresent
      livenessProbe:
        failureThreshold: 6
        httpGet:
          path: /healthz
          port: healthz
          scheme: HTTP
        initialDelaySeconds: 300
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 10
      name: kube-router
      ports:
      - containerPort: 20244
        hostPort: 20244
        name: healthz
        protocol: TCP
      readinessProbe:
        failureThreshold: 3
        httpGet:
          path: /healthz
          port: healthz
          scheme: HTTP
        periodSeconds: 3
        successThreshold: 3
        timeoutSeconds: 3
      resources:
        requests:
          cpu: 250m
          memory: 16Mi
      securityContext:
        privileged: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /lib/modules
        name: lib-modules
        readOnly: true
      - mountPath: /etc/cni/net.d
        name: cni-conf-dir
      - mountPath: /run/xtables.lock
        name: xtables-lock
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-tllm8
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    hostNetwork: true
    hostPID: true
    initContainers:
    - args:
      - install
      image: quay.io/k0sproject/cni-node:1.3.0-k0s.0
      imagePullPolicy: IfNotPresent
      name: install-cni-bins
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /host/opt/cni/bin
        name: cni-bin
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-tllm8
        readOnly: true
    - command:
      - /bin/sh
      - -c
      - set -e -x; if [ ! -f /etc/cni/net.d/10-kuberouter.conflist ]; then if [ -f
        /etc/cni/net.d/*.conf ]; then rm -f /etc/cni/net.d/*.conf; fi; TMP=/etc/cni/net.d/.tmp-kuberouter-cfg;
        cp /etc/kube-router/cni-conf.json ${TMP}; mv ${TMP} /etc/cni/net.d/10-kuberouter.conflist;
        fi
      image: quay.io/k0sproject/kube-router:v2.2.1-iptables1.8.9-1
      imagePullPolicy: IfNotPresent
      name: install-cniconf
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /etc/cni/net.d
        name: cni-conf-dir
      - mountPath: /etc/kube-router
        name: kube-router-cfg
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-tllm8
        readOnly: true
    nodeName: k0s
    preemptionPolicy: PreemptLowerPriority
    priority: 2000001000
    priorityClassName: system-node-critical
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: kube-router
    serviceAccountName: kube-router
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoSchedule
      operator: Exists
    - key: CriticalAddonsOnly
      operator: Exists
    - effect: NoExecute
      operator: Exists
    - effect: NoSchedule
      key: node-role.kubernetes.io/master
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/disk-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/memory-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/pid-pressure
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/unschedulable
      operator: Exists
    - effect: NoSchedule
      key: node.kubernetes.io/network-unavailable
      operator: Exists
    volumes:
    - hostPath:
        path: /lib/modules
        type: ""
      name: lib-modules
    - hostPath:
        path: /etc/cni/net.d
        type: ""
      name: cni-conf-dir
    - hostPath:
        path: /opt/cni/bin
        type: DirectoryOrCreate
      name: cni-bin
    - configMap:
        defaultMode: 420
        name: kube-router-cfg
      name: kube-router-cfg
    - hostPath:
        path: /run/xtables.lock
        type: FileOrCreate
      name: xtables-lock
    - name: kube-api-access-tllm8
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:27:20Z"
      status: "True"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:27:46Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:27:49Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:27:49Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:27:05Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://ec24041a05aefb442767c180ebaad745a4f1fa069bafcf85e5b986b8c739e07c
      image: quay.io/k0sproject/kube-router:v2.2.1-iptables1.8.9-1
      imageID: quay.io/k0sproject/kube-router@sha256:7d123cda213edf7e0f02795d58dcdb75f4ebee0122c62b2f50b4f7d2cef85450
      lastState: {}
      name: kube-router
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2024-12-28T20:27:46Z"
      volumeMounts:
      - mountPath: /lib/modules
        name: lib-modules
        readOnly: true
        recursiveReadOnly: Disabled
      - mountPath: /etc/cni/net.d
        name: cni-conf-dir
      - mountPath: /run/xtables.lock
        name: xtables-lock
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-tllm8
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 172.17.0.2
    hostIPs:
    - ip: 172.17.0.2
    initContainerStatuses:
    - containerID: containerd://b4f7055206a8e3a459fa0bfa0397c25262096781fbc6b947b78b1ee49311578e
      image: quay.io/k0sproject/cni-node:1.3.0-k0s.0
      imageID: quay.io/k0sproject/cni-node@sha256:f9ae72f1be998ba3d0a9298d35cbd5577758cc08326406c63fb4804b0664391a
      lastState: {}
      name: install-cni-bins
      ready: true
      restartCount: 0
      started: false
      state:
        terminated:
          containerID: containerd://b4f7055206a8e3a459fa0bfa0397c25262096781fbc6b947b78b1ee49311578e
          exitCode: 0
          finishedAt: "2024-12-28T20:27:19Z"
          reason: Completed
          startedAt: "2024-12-28T20:27:19Z"
      volumeMounts:
      - mountPath: /host/opt/cni/bin
        name: cni-bin
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-tllm8
        readOnly: true
        recursiveReadOnly: Disabled
    - containerID: containerd://775f5dcd2bc3f7d368dceecf21a345ad952e4133674d0daad4f66feeb6a7dabd
      image: quay.io/k0sproject/kube-router:v2.2.1-iptables1.8.9-1
      imageID: quay.io/k0sproject/kube-router@sha256:7d123cda213edf7e0f02795d58dcdb75f4ebee0122c62b2f50b4f7d2cef85450
      lastState: {}
      name: install-cniconf
      ready: true
      restartCount: 0
      started: false
      state:
        terminated:
          containerID: containerd://775f5dcd2bc3f7d368dceecf21a345ad952e4133674d0daad4f66feeb6a7dabd
          exitCode: 0
          finishedAt: "2024-12-28T20:27:46Z"
          reason: Completed
          startedAt: "2024-12-28T20:27:46Z"
      volumeMounts:
      - mountPath: /etc/cni/net.d
        name: cni-conf-dir
      - mountPath: /etc/kube-router
        name: kube-router-cfg
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-tllm8
        readOnly: true
        recursiveReadOnly: Disabled
    phase: Running
    podIP: 172.17.0.2
    podIPs:
    - ip: 172.17.0.2
    qosClass: Burstable
    startTime: "2024-12-28T20:27:06Z"
- apiVersion: v1
  kind: Pod
  metadata:
    creationTimestamp: "2024-12-28T20:27:11Z"
    generateName: metrics-server-78c4ccbc7f-
    labels:
#TBR:      k8s-app: metrics-server
# replaced by
      k0s.k0sproject.io/stack: metricserver
      pod-template-hash: 78c4ccbc7f
    name: metrics-server-78c4ccbc7f-sxfpt
    namespace: kube-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicaSet
      name: metrics-server-78c4ccbc7f
      uid: 78796479-6384-44f4-a568-8575c8802637
    resourceVersion: "686"
    uid: 89e04d40-ab49-4f73-b07c-de498f0d70d1
  spec:
    containers:
    - args:
      - --cert-dir=/tmp
      - --secure-port=10250
      - --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname
      - --kubelet-use-node-status-port
      - --metric-resolution=15s
      image: registry.k8s.io/metrics-server/metrics-server:v0.7.2
      imagePullPolicy: IfNotPresent
      livenessProbe:
        failureThreshold: 3
        httpGet:
          path: /livez
          port: https
          scheme: HTTPS
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      name: metrics-server
      ports:
      - containerPort: 10250
        name: https
        protocol: TCP
      readinessProbe:
        failureThreshold: 3
        httpGet:
          path: /readyz
          port: https
          scheme: HTTPS
        initialDelaySeconds: 20
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      resources:
        requests:
          cpu: 10m
          memory: 30M
      securityContext:
        readOnlyRootFilesystem: true
        runAsNonRoot: true
        runAsUser: 1000
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /tmp
        name: tmp-dir
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-kf2k2
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: k0s
    nodeSelector:
      kubernetes.io/os: linux
    preemptionPolicy: PreemptLowerPriority
    priority: 2000000000
    priorityClassName: system-cluster-critical
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: metrics-server
    serviceAccountName: metrics-server
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoSchedule
      key: node-role.kubernetes.io/master
      operator: Exists
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - emptyDir: {}
      name: tmp-dir
    - name: kube-api-access-kf2k2
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:28:05Z"
      status: "True"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:27:46Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:28:26Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:28:26Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2024-12-28T20:27:46Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://894fdd6a4f4de6e539acb8a764306332af4a7e383dd7ddf3cf365bd2dcb0cd46
      image: registry.k8s.io/metrics-server/metrics-server:v0.7.2
      imageID: registry.k8s.io/metrics-server/metrics-server@sha256:ffcb2bf004d6aa0a17d90e0247cf94f2865c8901dcab4427034c341951c239f9
      lastState: {}
      name: metrics-server
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2024-12-28T20:28:05Z"
      volumeMounts:
      - mountPath: /tmp
        name: tmp-dir
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-kf2k2
        readOnly: true
        recursiveReadOnly: Disabled
    hostIP: 172.17.0.2
    hostIPs:
    - ip: 172.17.0.2
    phase: Running
    podIP: 10.244.0.2
    podIPs:
    - ip: 10.244.0.2
    qosClass: Burstable
    startTime: "2024-12-28T20:27:46Z"
- apiVersion: apps/v1
  kind: ReplicaSet
  metadata:
    annotations:
      deployment.kubernetes.io/desired-replicas: "1"
      deployment.kubernetes.io/max-replicas: "2"
      deployment.kubernetes.io/revision: "1"
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"labels":{"k8s-app":"kube-dns","kubernetes.io/name":"CoreDNS"},"name":"coredns","namespace":"kube-system"},"spec":{"replicas":1,"selector":{"matchLabels":{"k8s-app":"kube-dns"}},"strategy":{"type":"RollingUpdate"},"template":{"metadata":{"annotations":{"prometheus.io/port":"9153","prometheus.io/scrape":"true"},"labels":{"k8s-app":"kube-dns"}},"spec":{"containers":[{"args":["-conf","/etc/coredns/Corefile"],"image":"quay.io/k0sproject/coredns:1.11.4","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/health","port":8080,"scheme":"HTTP"},"initialDelaySeconds":60,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":1},"name":"coredns","ports":[{"containerPort":53,"name":"dns","protocol":"UDP"},{"containerPort":53,"name":"dns-tcp","protocol":"TCP"},{"containerPort":9153,"name":"metrics","protocol":"TCP"}],"readinessProbe":{"failureThreshold":3,"httpGet":{"path":"/ready","port":8181,"scheme":"HTTP"},"initialDelaySeconds":30,"periodSeconds":2,"successThreshold":1,"timeoutSeconds":1},"resources":{"limits":{"memory":"170Mi"},"requests":{"cpu":"100m","memory":"70Mi"}},"securityContext":{"allowPrivilegeEscalation":false,"capabilities":{"add":["NET_BIND_SERVICE"],"drop":["all"]},"readOnlyRootFilesystem":true},"volumeMounts":[{"mountPath":"/etc/coredns","name":"config-volume","readOnly":true}]}],"dnsPolicy":"Default","nodeSelector":{"kubernetes.io/os":"linux"},"serviceAccountName":"coredns","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoSchedule","key":"node-role.kubernetes.io/master","operator":"Exists"}],"volumes":[{"configMap":{"items":[{"key":"Corefile","path":"Corefile"}],"name":"coredns"},"name":"config-volume"}]}}}}
      k0s.k0sproject.io/stack-checksum: 8426081788c93707a4c6d649ae61251b
    creationTimestamp: "2024-12-28T20:27:04Z"
    generation: 1
    labels:
#TBR:      k8s-app: kube-dns
# replaced by
      k0s.k0sproject.io/stack: coredns
      pod-template-hash: 7b7b486b6c
    name: coredns-7b7b486b6c
    namespace: kube-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: Deployment
      name: coredns
      uid: 968da5dd-8b7f-4e7a-ad84-d2bc6a82ada9
    resourceVersion: "685"
    uid: 25873427-86bb-4d88-a7d1-d0e0edbc5751
  spec:
    replicas: 1
    selector:
      matchLabels:
#TBR:        k8s-app: kube-dns
# replaced by
        k0s.k0sproject.io/stack: coredns
        pod-template-hash: 7b7b486b6c
    template:
      metadata:
        annotations:
          prometheus.io/port: "9153"
          prometheus.io/scrape: "true"
        creationTimestamp: null
        labels:
#TBR:          k8s-app: kube-dns
# replaced by
          k0s.k0sproject.io/stack: coredns
          pod-template-hash: 7b7b486b6c
      spec:
        containers:
        - args:
          - -conf
          - /etc/coredns/Corefile
          image: quay.io/k0sproject/coredns:1.11.4
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /health
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 60
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: coredns
          ports:
          - containerPort: 53
            name: dns
            protocol: UDP
          - containerPort: 53
            name: dns-tcp
            protocol: TCP
          - containerPort: 9153
            name: metrics
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /ready
              port: 8181
              scheme: HTTP
            initialDelaySeconds: 30
            periodSeconds: 2
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              memory: 170Mi
            requests:
              cpu: 100m
              memory: 70Mi
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              add:
              - NET_BIND_SERVICE
              drop:
              - all
            readOnlyRootFilesystem: true
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /etc/coredns
            name: config-volume
            readOnly: true
        dnsPolicy: Default
        nodeSelector:
          kubernetes.io/os: linux
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: coredns
        serviceAccountName: coredns
        terminationGracePeriodSeconds: 30
        tolerations:
        - key: CriticalAddonsOnly
          operator: Exists
        - effect: NoSchedule
          key: node-role.kubernetes.io/master
          operator: Exists
        volumes:
        - configMap:
            defaultMode: 420
            items:
            - key: Corefile
              path: Corefile
            name: coredns
          name: config-volume
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
- apiVersion: apps/v1
  kind: ReplicaSet
  metadata:
    annotations:
      deployment.kubernetes.io/desired-replicas: "1"
      deployment.kubernetes.io/max-replicas: "2"
      deployment.kubernetes.io/revision: "1"
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"labels":{"k8s-app":"metrics-server"},"name":"metrics-server","namespace":"kube-system"},"spec":{"replicas":1,"selector":{"matchLabels":{"k8s-app":"metrics-server"}},"strategy":{"rollingUpdate":{"maxUnavailable":0}},"template":{"metadata":{"labels":{"k8s-app":"metrics-server"}},"spec":{"containers":[{"args":["--cert-dir=/tmp","--secure-port=10250","--kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname","--kubelet-use-node-status-port","--metric-resolution=15s"],"image":"registry.k8s.io/metrics-server/metrics-server:v0.7.2","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/livez","port":"https","scheme":"HTTPS"},"periodSeconds":10},"name":"metrics-server","ports":[{"containerPort":10250,"name":"https","protocol":"TCP"}],"readinessProbe":{"failureThreshold":3,"httpGet":{"path":"/readyz","port":"https","scheme":"HTTPS"},"initialDelaySeconds":20,"periodSeconds":10},"resources":{"requests":{"cpu":"10m","memory":"30M"}},"securityContext":{"readOnlyRootFilesystem":true,"runAsNonRoot":true,"runAsUser":1000},"volumeMounts":[{"mountPath":"/tmp","name":"tmp-dir"}]}],"nodeSelector":{"kubernetes.io/os":"linux"},"priorityClassName":"system-cluster-critical","serviceAccountName":"metrics-server","tolerations":[{"effect":"NoSchedule","key":"node-role.kubernetes.io/master","operator":"Exists"}],"volumes":[{"emptyDir":{},"name":"tmp-dir"}]}}}}
      k0s.k0sproject.io/stack-checksum: 14b88ca96a7da114865a03d3b0063bbc
    creationTimestamp: "2024-12-28T20:27:11Z"
    generation: 1
    labels:
#TBR:      k8s-app: metrics-server
# replaced by
      k0s.k0sproject.io/stack: metricserver
      pod-template-hash: 78c4ccbc7f
    name: metrics-server-78c4ccbc7f
    namespace: kube-system
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: Deployment
      name: metrics-server
      uid: 948e7e3d-39a0-4ee5-8ecb-ee3e35f2d8a4
    resourceVersion: "689"
    uid: 78796479-6384-44f4-a568-8575c8802637
  spec:
    replicas: 1
    selector:
      matchLabels:
#TBR:        k8s-app: metrics-server
# replaced by
        k0s.k0sproject.io/stack: metricserver
        pod-template-hash: 78c4ccbc7f
    template:
      metadata:
        creationTimestamp: null
        labels:
#TBR:          k8s-app: metrics-server
# replaced by
          k0s.k0sproject.io/stack: metricserver
          pod-template-hash: 78c4ccbc7f
      spec:
        containers:
        - args:
          - --cert-dir=/tmp
          - --secure-port=10250
          - --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname
          - --kubelet-use-node-status-port
          - --metric-resolution=15s
          image: registry.k8s.io/metrics-server/metrics-server:v0.7.2
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /livez
              port: https
              scheme: HTTPS
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: metrics-server
          ports:
          - containerPort: 10250
            name: https
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /readyz
              port: https
              scheme: HTTPS
            initialDelaySeconds: 20
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            requests:
              cpu: 10m
              memory: 30M
          securityContext:
            readOnlyRootFilesystem: true
            runAsNonRoot: true
            runAsUser: 1000
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /tmp
            name: tmp-dir
        dnsPolicy: ClusterFirst
        nodeSelector:
          kubernetes.io/os: linux
        priorityClassName: system-cluster-critical
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: metrics-server
        serviceAccountName: metrics-server
        terminationGracePeriodSeconds: 30
        tolerations:
        - effect: NoSchedule
          key: node-role.kubernetes.io/master
          operator: Exists
        volumes:
        - emptyDir: {}
          name: tmp-dir
  status:
    availableReplicas: 1
    fullyLabeledReplicas: 1
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
- apiVersion: v1
  kind: Service
  metadata:
    creationTimestamp: "2024-12-28T20:26:56Z"
    labels:
      component: apiserver
      provider: kubernetes
    name: kubernetes
    namespace: default
    resourceVersion: "194"
    uid: 1dbf74bd-ac76-480b-a0da-b53f417dc6c3
  spec:
    clusterIP: 10.96.0.1
    clusterIPs:
    - 10.96.0.1
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: https
      port: 443
      protocol: TCP
      targetPort: 6443
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{"prometheus.io/port":"9153","prometheus.io/scrape":"true"},"labels":{"k8s-app":"kube-dns","kubernetes.io/cluster-service":"true","kubernetes.io/name":"CoreDNS"},"name":"kube-dns","namespace":"kube-system"},"spec":{"clusterIP":"10.96.0.10","ports":[{"name":"dns","port":53,"protocol":"UDP"},{"name":"dns-tcp","port":53,"protocol":"TCP"},{"name":"metrics","port":9153,"protocol":"TCP"}],"selector":{"k8s-app":"kube-dns"}}}
      k0s.k0sproject.io/stack-checksum: b3b87b209fc7c401e5e236adb6958b72
      prometheus.io/port: "9153"
      prometheus.io/scrape: "true"
    creationTimestamp: "2024-12-28T20:27:06Z"
    labels:
      k0s.k0sproject.io/stack: coredns
#TBR:      k8s-app: kube-dns
# replaced by
      k0s.k0sproject.io/stack: coredns
      kubernetes.io/cluster-service: "true"
      kubernetes.io/name: CoreDNS
    name: kube-dns
    namespace: kube-system
    resourceVersion: "377"
    uid: e6e3f029-c63b-4bd4-af6d-c585e5284802
  spec:
    clusterIP: 10.96.0.10
    clusterIPs:
    - 10.96.0.10
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: dns
      port: 53
      protocol: UDP
      targetPort: 53
    - name: dns-tcp
      port: 53
      protocol: TCP
      targetPort: 53
    - name: metrics
      port: 9153
      protocol: TCP
      targetPort: 9153
    selector:
#TBR:      k8s-app: kube-dns
# replaced by
      k0s.k0sproject.io/stack: coredns
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"labels":{"k8s-app":"metrics-server"},"name":"metrics-server","namespace":"kube-system"},"spec":{"ports":[{"name":"https","port":443,"protocol":"TCP","targetPort":"https"}],"selector":{"k8s-app":"metrics-server"}}}
      k0s.k0sproject.io/stack-checksum: 4153d417c6f7acc5a1b8b38047c49d1f
    creationTimestamp: "2024-12-28T20:27:11Z"
    labels:
      k0s.k0sproject.io/stack: metricserver
#TBR:      k8s-app: metrics-server
    name: metrics-server
    namespace: kube-system
    resourceVersion: "427"
    uid: 1240653e-0794-48d1-8a3d-303d3cd7ad08
  spec:
    clusterIP: 10.105.79.93
    clusterIPs:
    - 10.105.79.93
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: https
      port: 443
      protocol: TCP
      targetPort: https
    selector:
#TBR:      k8s-app: metrics-server
      k0s.k0sproject.io/stack: metricserver
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:04Z"
    name: default
    namespace: default
    resourceVersion: "301"
    uid: c7fae713-32cc-48c2-ba3a-155795c7ed65
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:04Z"
    name: default
    namespace: k0s-autopilot
    resourceVersion: "302"
    uid: fa6d370a-8f34-43fd-ad48-4a53895c1acb
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:04Z"
    name: default
    namespace: kube-node-lease
    resourceVersion: "303"
    uid: 086ea941-d116-4828-81a3-021c73da05bf
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:04Z"
    name: default
    namespace: kube-public
    resourceVersion: "304"
    uid: e89111c2-c627-40d5-a5e8-3dea207ca15c
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:26:59Z"
    name: attachdetach-controller
    namespace: kube-system
    resourceVersion: "229"
    uid: fb88f9ba-455f-4ecb-9675-d8ef15cb307a
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:01Z"
    name: bootstrap-signer
    namespace: kube-system
    resourceVersion: "266"
    uid: 4c52e5fe-1b9f-47d1-a140-8ba9ff33c71a
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:02Z"
    name: certificate-controller
    namespace: kube-system
    resourceVersion: "275"
    uid: 2efcfa85-0937-4625-bd8e-2936bdb2d9bf
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:03Z"
    name: clusterrole-aggregation-controller
    namespace: kube-system
    resourceVersion: "293"
    uid: e2cd150c-bbdc-4798-ab6f-9295c14dee6d
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    annotations:
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"ServiceAccount","metadata":{"name":"coredns","namespace":"kube-system"}}
      k0s.k0sproject.io/stack-checksum: 97e5cdbd317f3de20d86cf1d88bde699
    creationTimestamp: "2024-12-28T20:27:00Z"
    labels:
      k0s.k0sproject.io/stack: coredns
    name: coredns
    namespace: kube-system
    resourceVersion: "256"
    uid: ad923083-937e-487d-b710-a15110c1a85d
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:26:59Z"
    name: cronjob-controller
    namespace: kube-system
    resourceVersion: "232"
    uid: 67c19ff5-42ce-4c1f-a00d-9b6adc88b0b8
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:26:59Z"
    name: daemon-set-controller
    namespace: kube-system
    resourceVersion: "227"
    uid: d1db9806-7c2b-41ee-8244-bcb54525dceb
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:04Z"
    name: default
    namespace: kube-system
    resourceVersion: "305"
    uid: 7aaffd7b-577f-4c7e-accd-116e44aca926
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:03Z"
    name: deployment-controller
    namespace: kube-system
    resourceVersion: "297"
    uid: 654f2aa8-8da8-414a-88cb-2fdb16a0bf6b
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:26:59Z"
    name: disruption-controller
    namespace: kube-system
    resourceVersion: "228"
    uid: 373c46a9-5030-4d19-9530-62c9ac903731
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:26:59Z"
    name: endpoint-controller
    namespace: kube-system
    resourceVersion: "221"
    uid: e4597859-5daf-4b03-98de-3f1f9df29f8f
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:26:59Z"
    name: endpointslice-controller
    namespace: kube-system
    resourceVersion: "231"
    uid: 4d66c96d-a718-470c-ab35-e6a0741a6fe2
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:00Z"
    name: endpointslicemirroring-controller
    namespace: kube-system
    resourceVersion: "253"
    uid: b8fa6ae1-c358-40e8-9ebe-433152672527
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:02Z"
    name: ephemeral-volume-controller
    namespace: kube-system
    resourceVersion: "289"
    uid: 55dd2959-1481-40cf-bdbe-17540cf9994d
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:03Z"
    name: expand-controller
    namespace: kube-system
    resourceVersion: "299"
    uid: b09ea09c-4802-44d2-b698-7724ec2d0b48
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:00Z"
    name: generic-garbage-collector
    namespace: kube-system
    resourceVersion: "255"
    uid: ab860a04-9841-488e-a87f-45fd0d192e0e
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:00Z"
    name: horizontal-pod-autoscaler
    namespace: kube-system
    resourceVersion: "260"
    uid: 545cd7a9-61b1-4ab8-aebe-1d45b14480c8
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:01Z"
    name: job-controller
    namespace: kube-system
    resourceVersion: "272"
    uid: f536a992-2ccf-4e0f-bb04-c3d5e6f28d0d
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    annotations:
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"ServiceAccount","metadata":{"labels":{"kubernetes.io/cluster-service":"true"},"name":"konnectivity-agent","namespace":"kube-system"}}
      k0s.k0sproject.io/stack-checksum: a3493fd42aa371324b3889e0cbf06ece
    creationTimestamp: "2024-12-28T20:27:00Z"
    labels:
      k0s.k0sproject.io/stack: konnectivity
      kubernetes.io/cluster-service: "true"
    name: konnectivity-agent
    namespace: kube-system
    resourceVersion: "247"
    uid: 2262bedc-bb21-47f2-b688-ae8ed8b62c3a
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    annotations:
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"ServiceAccount","metadata":{"name":"kube-proxy","namespace":"kube-system"}}
      k0s.k0sproject.io/stack-checksum: a620674fc95d051a0f17cb336594e60f
    creationTimestamp: "2024-12-28T20:27:00Z"
    labels:
      k0s.k0sproject.io/stack: kubeproxy
    name: kube-proxy
    namespace: kube-system
    resourceVersion: "246"
    uid: 4ecbe7f8-995d-4080-9829-385622baa12f
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    annotations:
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"ServiceAccount","metadata":{"name":"kube-router","namespace":"kube-system"}}
      k0s.k0sproject.io/stack-checksum: 0a3e31fdaf2d108c1960e274449a6f0d
    creationTimestamp: "2024-12-28T20:27:02Z"
    labels:
      k0s.k0sproject.io/stack: kuberouter
      tier: node #ADDED: but I am not sure that it is needed!
    name: kube-router
    namespace: kube-system
    resourceVersion: "285"
    uid: 3b4c2030-8b83-45cb-93a3-6363166a67be
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:00Z"
    name: legacy-service-account-token-cleaner
    namespace: kube-system
    resourceVersion: "252"
    uid: 2cd5e354-ca38-445c-a410-acdbc5e05402
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    annotations:
      k0s.k0sproject.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"ServiceAccount","metadata":{"labels":{"k8s-app":"metrics-server"},"name":"metrics-server","namespace":"kube-system"}}
      k0s.k0sproject.io/stack-checksum: 67056da15f08f9026950717b3a06f7cf
    creationTimestamp: "2024-12-28T20:27:11Z"
    labels:
      k0s.k0sproject.io/stack: metricserver
#TBR:      k8s-app: metrics-server
    name: metrics-server
    namespace: kube-system
    resourceVersion: "424"
    uid: 093be0ac-13df-49dd-b33e-b020f558b17e
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:02Z"
    name: namespace-controller
    namespace: kube-system
    resourceVersion: "291"
    uid: eaa77e6b-d7ea-448a-a002-340395e2be7f
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:00Z"
    name: node-controller
    namespace: kube-system
    resourceVersion: "242"
    uid: 25a12d3c-541c-488d-b3a3-07b02d0d1ce5
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:26:59Z"
    name: persistent-volume-binder
    namespace: kube-system
    resourceVersion: "233"
    uid: 3672b5c8-52a7-4af4-85b8-25b9029f836b
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:26:59Z"
    name: pod-garbage-collector
    namespace: kube-system
    resourceVersion: "222"
    uid: ef1ad303-610d-446e-9688-e89da4f9d5fb
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:02Z"
    name: pv-protection-controller
    namespace: kube-system
    resourceVersion: "281"
    uid: 5f88db6b-6b96-4b62-906e-163faf4587ea
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:26:59Z"
    name: pvc-protection-controller
    namespace: kube-system
    resourceVersion: "230"
    uid: dfdb44a6-10b1-49ce-81a3-4fb72972f789
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:03Z"
    name: replicaset-controller
    namespace: kube-system
    resourceVersion: "292"
    uid: 2be93bad-e7ee-44ca-8ee1-dbb88e040678
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:00Z"
    name: replication-controller
    namespace: kube-system
    resourceVersion: "254"
    uid: bd01dd21-5bcd-47da-a4df-7dd5d18542ec
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:26:59Z"
    name: resourcequota-controller
    namespace: kube-system
    resourceVersion: "223"
    uid: 1b775506-a335-40ea-bad3-9d6d47c4e251
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:04Z"
    name: root-ca-cert-publisher
    namespace: kube-system
    resourceVersion: "300"
    uid: 03934770-8455-41b3-8138-636d276fa337
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:02Z"
    name: service-account-controller
    namespace: kube-system
    resourceVersion: "277"
    uid: 1cc3e217-79b8-403e-86ac-6e943a10667a
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:01Z"
    name: statefulset-controller
    namespace: kube-system
    resourceVersion: "274"
    uid: 6185ee41-f142-4de6-ac1d-7dd3b8a5f4cb
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:01Z"
    name: token-cleaner
    namespace: kube-system
    resourceVersion: "265"
    uid: c41abb0e-8c7b-46c1-ab80-8b80e54dad42
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:01Z"
    name: ttl-after-finished-controller
    namespace: kube-system
    resourceVersion: "269"
    uid: 080384e3-0f47-4d49-9754-ceef4d200201
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:02Z"
    name: ttl-controller
    namespace: kube-system
    resourceVersion: "276"
    uid: 2d2780b9-4c47-43c5-a88a-d2846cf88b1b
- apiVersion: v1
  kind: ServiceAccount
  metadata:
    creationTimestamp: "2024-12-28T20:27:03Z"
    name: validatingadmissionpolicy-status-controller
    namespace: kube-system
    resourceVersion: "294"
    uid: 6904570b-418f-4a2d-b9bc-b9be54edeaf4
- apiVersion: v1
  kind: Namespace
  metadata:
    creationTimestamp: "2024-12-28T20:26:55Z"
    labels:
      kubernetes.io/metadata.name: default
    name: default
    resourceVersion: "65"
    uid: 78c48c2e-ae56-4e8d-b3b9-9e623a4703b5
  spec:
    finalizers:
    - kubernetes
  status:
    phase: Active
- apiVersion: v1
  kind: Namespace
  metadata:
    creationTimestamp: "2024-12-28T20:26:58Z"
    labels:
      kubernetes.io/metadata.name: k0s-autopilot
    name: k0s-autopilot
    resourceVersion: "211"
    uid: ac098660-c162-4275-84c8-8b4e3b77ad37
  spec:
    finalizers:
    - kubernetes
  status:
    phase: Active
- apiVersion: v1
  kind: Namespace
  metadata:
    creationTimestamp: "2024-12-28T20:26:55Z"
    labels:
      kubernetes.io/metadata.name: kube-node-lease
    name: kube-node-lease
    resourceVersion: "66"
    uid: 71300ba5-49fb-4f82-80d3-92ac2d4b53cd
  spec:
    finalizers:
    - kubernetes
  status:
    phase: Active
- apiVersion: v1
  kind: Namespace
  metadata:
    creationTimestamp: "2024-12-28T20:26:55Z"
    labels:
      kubernetes.io/metadata.name: kube-public
    name: kube-public
    resourceVersion: "64"
    uid: a5d3ac3e-91ed-4c03-a06a-79219d7155e7
  spec:
    finalizers:
    - kubernetes
  status:
    phase: Active
- apiVersion: v1
  kind: Namespace
  metadata:
    creationTimestamp: "2024-12-28T20:26:55Z"
    labels:
      kubernetes.io/metadata.name: kube-system
    name: kube-system
    resourceVersion: "12"
    uid: 5743f4e7-7e31-43f5-8a64-e2e3d6e87848
  spec:
    finalizers:
    - kubernetes
  status:
    phase: Active
- apiVersion: autopilot.k0sproject.io/v1beta2
  kind: ControlNode
  metadata:
    annotations:
      autopilot.k0sproject.io/mode: controller+worker
    creationTimestamp: "2024-12-28T20:27:02Z"
    generation: 1
    labels:
      kubernetes.io/arch: amd64
      kubernetes.io/hostname: k0s
      kubernetes.io/os: linux
    name: k0s
    resourceVersion: "323"
    uid: ecbf47a2-0faf-435a-a276-5f3574cc3172
  status:
    addresses:
    - address: 172.17.0.2
      type: InternalIP
    - address: k0s
      type: Hostname
- apiVersion: etcd.k0sproject.io/v1beta1
  kind: EtcdMember
  metadata:
    creationTimestamp: "2024-12-28T20:27:00Z"
    generation: 1
    name: k0s
    resourceVersion: "240"
    uid: b2e009df-bb65-4b1f-a7b6-2384b3ba60f1
  spec: {}
  status:
    conditions:
    - lastTransitionTime: "2024-12-28T20:27:00Z"
      message: Member joined
      status: "True"
      type: Joined
    memberID: b8e14bda2255bc24
    peerAddress: 172.17.0.2
kind: List
metadata:
  resourceVersion: ""
